{"cells":[{"cell_type":"markdown","source":["# 4. LangChain Chat with your Data"],"metadata":{"id":"1Ta2vlXdJgNX"}},{"cell_type":"markdown","metadata":{"id":"WC9InTkjiczp"},"source":["## 1. Introduction\n"]},{"cell_type":"code","execution_count":308,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":3852,"status":"ok","timestamp":1722972292798,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"},"user_tz":-330},"id":"kRzjtiKzkiK-","outputId":"7286c881-7ac7-4c82-d705-e046802ec648"},"outputs":[{"output_type":"stream","name":"stdout","text":["Requirement already satisfied: openai in /usr/local/lib/python3.10/dist-packages (1.39.0)\n","Requirement already satisfied: tiktoken in /usr/local/lib/python3.10/dist-packages (0.7.0)\n","Requirement already satisfied: anyio<5,>=3.5.0 in /usr/local/lib/python3.10/dist-packages (from openai) (3.7.1)\n","Requirement already satisfied: distro<2,>=1.7.0 in /usr/lib/python3/dist-packages (from openai) (1.7.0)\n","Requirement already satisfied: httpx<1,>=0.23.0 in /usr/local/lib/python3.10/dist-packages (from openai) (0.27.0)\n","Requirement already satisfied: pydantic<3,>=1.9.0 in /usr/local/lib/python3.10/dist-packages (from openai) (2.8.2)\n","Requirement already satisfied: sniffio in /usr/local/lib/python3.10/dist-packages (from openai) (1.3.1)\n","Requirement already satisfied: tqdm>4 in /usr/local/lib/python3.10/dist-packages (from openai) (4.66.4)\n","Requirement already satisfied: typing-extensions<5,>=4.7 in /usr/local/lib/python3.10/dist-packages (from openai) (4.12.2)\n","Requirement already satisfied: regex>=2022.1.18 in /usr/local/lib/python3.10/dist-packages (from tiktoken) (2024.5.15)\n","Requirement already satisfied: requests>=2.26.0 in /usr/local/lib/python3.10/dist-packages (from tiktoken) (2.32.3)\n","Requirement already satisfied: idna>=2.8 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.5.0->openai) (3.7)\n","Requirement already satisfied: exceptiongroup in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.5.0->openai) (1.2.2)\n","Requirement already satisfied: certifi in /usr/local/lib/python3.10/dist-packages (from httpx<1,>=0.23.0->openai) (2024.7.4)\n","Requirement already satisfied: httpcore==1.* in /usr/local/lib/python3.10/dist-packages (from httpx<1,>=0.23.0->openai) (1.0.5)\n","Requirement already satisfied: h11<0.15,>=0.13 in /usr/local/lib/python3.10/dist-packages (from httpcore==1.*->httpx<1,>=0.23.0->openai) (0.14.0)\n","Requirement already satisfied: annotated-types>=0.4.0 in /usr/local/lib/python3.10/dist-packages (from pydantic<3,>=1.9.0->openai) (0.7.0)\n","Requirement already satisfied: pydantic-core==2.20.1 in /usr/local/lib/python3.10/dist-packages (from pydantic<3,>=1.9.0->openai) (2.20.1)\n","Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken) (3.3.2)\n","Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken) (2.0.7)\n"]}],"source":["!pip install openai tiktoken"]},{"cell_type":"code","execution_count":309,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":3497,"status":"ok","timestamp":1722972296293,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"},"user_tz":-330},"id":"VxGJPOoVhmuY","outputId":"1f957470-2a5f-42b0-d5a0-a7e60258d0bc"},"outputs":[{"output_type":"stream","name":"stdout","text":["Drive already mounted at /content/drive; to attempt to forcibly remount, call drive.mount(\"/content/drive\", force_remount=True).\n"]}],"source":["import os\n","import openai\n","import tiktoken\n","\n","# Mount Google Drive\n","from google.colab import drive\n","drive.mount('/content/drive')\n","\n","# Path to the file containing the API key\n","key_file_path = '/content/drive/MyDrive/Confidential/Keys/openai.key'\n","\n","# Read the API key from the file\n","with open(key_file_path, 'r') as file:\n","    api_key = file.read().strip()\n","\n","client = openai.OpenAI(api_key = api_key)\n","\n","\n","# account for deprecation of LLM model\n","import datetime\n","# Get the current date\n","current_date = datetime.datetime.now().date()\n","\n","# Define the date after which the model should be set to \"gpt-3.5-turbo\"\n","target_date = datetime.date(2024, 6, 12)\n","\n","# Set the model variable based on the current date\n","if current_date > target_date:\n","    llm_model = \"gpt-3.5-turbo\"\n","else:\n","    llm_model = \"gpt-3.5-turbo-0301\"\n","\n","def get_completion(prompt, model=llm_model,temperature=0):\n","    messages = [{\"role\": \"user\", \"content\": prompt}]\n","    response = client.chat.completions.create(\n","        model=model,\n","        messages=messages,\n","        temperature=temperature\n","    )\n","    return response.choices[0].message.content\n","\n","def get_completion_from_messages(messages, model=\"gpt-3.5-turbo\", temperature=0):\n","    response = client.chat.completions.create(\n","        model=model,\n","        messages=messages,\n","        temperature=temperature, # this is the degree of randomness of the model's output\n","    )\n","#     print(str(response.choices[0].message))\n","    return response.choices[0].message.content\n","\n"]},{"cell_type":"code","source":["get_completion(\"What is 1+1?\")"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":35},"id":"-JHGmSGwLmUL","executionInfo":{"status":"ok","timestamp":1722972296293,"user_tz":-330,"elapsed":4,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"75d85bf8-cc92-4e0d-d3a8-f1742e2a82dd"},"execution_count":310,"outputs":[{"output_type":"execute_result","data":{"text/plain":["'1+1 equals 2.'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":310}]},{"cell_type":"markdown","source":["## 2. Document Loading"],"metadata":{"id":"HBNWZ9ql2IJD"}},{"cell_type":"code","source":["!pip install --force-reinstall --no-cache-dir langchain\n","!pip install --force-reinstall --no-cache-dir pypdf\n","!pip install --force-reinstall --no-cache-dir -U langchain-community"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"tcocXWy12Ku_","executionInfo":{"status":"ok","timestamp":1722973480532,"user_tz":-330,"elapsed":55915,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"80084077-70b2-47c4-dc96-d7bd7010fc72"},"execution_count":362,"outputs":[{"output_type":"stream","name":"stdout","text":["Collecting langchain\n","  Using cached langchain-0.2.12-py3-none-any.whl.metadata (7.1 kB)\n","Collecting PyYAML>=5.3 (from langchain)\n","  Using cached PyYAML-6.0.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.1 kB)\n","Collecting SQLAlchemy<3,>=1.4 (from langchain)\n","  Downloading SQLAlchemy-2.0.32-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.6 kB)\n","Collecting aiohttp<4.0.0,>=3.8.3 (from langchain)\n","  Downloading aiohttp-3.10.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (7.5 kB)\n","Collecting async-timeout<5.0.0,>=4.0.0 (from langchain)\n","  Using cached async_timeout-4.0.3-py3-none-any.whl.metadata (4.2 kB)\n","Collecting langchain-core<0.3.0,>=0.2.27 (from langchain)\n","  Using cached langchain_core-0.2.28-py3-none-any.whl.metadata (6.2 kB)\n","Collecting langchain-text-splitters<0.3.0,>=0.2.0 (from langchain)\n","  Using cached langchain_text_splitters-0.2.2-py3-none-any.whl.metadata (2.1 kB)\n","Collecting langsmith<0.2.0,>=0.1.17 (from langchain)\n","  Using cached langsmith-0.1.98-py3-none-any.whl.metadata (13 kB)\n","Collecting numpy<2,>=1 (from langchain)\n","  Using cached numpy-1.26.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (61 kB)\n","Collecting pydantic<3,>=1 (from langchain)\n","  Using cached pydantic-2.8.2-py3-none-any.whl.metadata (125 kB)\n","Collecting requests<3,>=2 (from langchain)\n","  Using cached requests-2.32.3-py3-none-any.whl.metadata (4.6 kB)\n","Collecting tenacity!=8.4.0,<9.0.0,>=8.1.0 (from langchain)\n","  Using cached tenacity-8.5.0-py3-none-any.whl.metadata (1.2 kB)\n","Collecting aiohappyeyeballs>=2.3.0 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Using cached aiohappyeyeballs-2.3.4-py3-none-any.whl.metadata (5.6 kB)\n","Collecting aiosignal>=1.1.2 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Using cached aiosignal-1.3.1-py3-none-any.whl.metadata (4.0 kB)\n","Collecting attrs>=17.3.0 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Downloading attrs-24.2.0-py3-none-any.whl.metadata (11 kB)\n","Collecting frozenlist>=1.1.1 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Using cached frozenlist-1.4.1-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (12 kB)\n","Collecting multidict<7.0,>=4.5 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Using cached multidict-6.0.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.2 kB)\n","Collecting yarl<2.0,>=1.0 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Using cached yarl-1.9.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (31 kB)\n","Collecting jsonpatch<2.0,>=1.33 (from langchain-core<0.3.0,>=0.2.27->langchain)\n","  Using cached jsonpatch-1.33-py2.py3-none-any.whl.metadata (3.0 kB)\n","Collecting packaging<25,>=23.2 (from langchain-core<0.3.0,>=0.2.27->langchain)\n","  Using cached packaging-24.1-py3-none-any.whl.metadata (3.2 kB)\n","Collecting typing-extensions>=4.7 (from langchain-core<0.3.0,>=0.2.27->langchain)\n","  Using cached typing_extensions-4.12.2-py3-none-any.whl.metadata (3.0 kB)\n","Collecting orjson<4.0.0,>=3.9.14 (from langsmith<0.2.0,>=0.1.17->langchain)\n","  Using cached orjson-3.10.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (50 kB)\n","Collecting annotated-types>=0.4.0 (from pydantic<3,>=1->langchain)\n","  Using cached annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)\n","Collecting pydantic-core==2.20.1 (from pydantic<3,>=1->langchain)\n","  Using cached pydantic_core-2.20.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.6 kB)\n","Collecting charset-normalizer<4,>=2 (from requests<3,>=2->langchain)\n","  Using cached charset_normalizer-3.3.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (33 kB)\n","Collecting idna<4,>=2.5 (from requests<3,>=2->langchain)\n","  Using cached idna-3.7-py3-none-any.whl.metadata (9.9 kB)\n","Collecting urllib3<3,>=1.21.1 (from requests<3,>=2->langchain)\n","  Downloading urllib3-2.2.2-py3-none-any.whl.metadata (6.4 kB)\n","Collecting certifi>=2017.4.17 (from requests<3,>=2->langchain)\n","  Using cached certifi-2024.7.4-py3-none-any.whl.metadata (2.2 kB)\n","Collecting greenlet!=0.4.17 (from SQLAlchemy<3,>=1.4->langchain)\n","  Using cached greenlet-3.0.3-cp310-cp310-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl.metadata (3.8 kB)\n","Collecting jsonpointer>=1.9 (from jsonpatch<2.0,>=1.33->langchain-core<0.3.0,>=0.2.27->langchain)\n","  Using cached jsonpointer-3.0.0-py2.py3-none-any.whl.metadata (2.3 kB)\n","Using cached langchain-0.2.12-py3-none-any.whl (990 kB)\n","Downloading aiohttp-3.10.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.2 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m1.2/1.2 MB\u001b[0m \u001b[31m6.2 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hUsing cached async_timeout-4.0.3-py3-none-any.whl (5.7 kB)\n","Using cached langchain_core-0.2.28-py3-none-any.whl (379 kB)\n","Using cached langchain_text_splitters-0.2.2-py3-none-any.whl (25 kB)\n","Using cached langsmith-0.1.98-py3-none-any.whl (140 kB)\n","Using cached numpy-1.26.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (18.2 MB)\n","Using cached pydantic-2.8.2-py3-none-any.whl (423 kB)\n","Using cached pydantic_core-2.20.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)\n","Using cached PyYAML-6.0.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (705 kB)\n","Using cached requests-2.32.3-py3-none-any.whl (64 kB)\n","Downloading SQLAlchemy-2.0.32-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.1 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m3.1/3.1 MB\u001b[0m \u001b[31m34.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hUsing cached tenacity-8.5.0-py3-none-any.whl (28 kB)\n","Using cached aiohappyeyeballs-2.3.4-py3-none-any.whl (12 kB)\n","Using cached aiosignal-1.3.1-py3-none-any.whl (7.6 kB)\n","Using cached annotated_types-0.7.0-py3-none-any.whl (13 kB)\n","Downloading attrs-24.2.0-py3-none-any.whl (63 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m63.0/63.0 kB\u001b[0m \u001b[31m3.2 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hUsing cached certifi-2024.7.4-py3-none-any.whl (162 kB)\n","Using cached charset_normalizer-3.3.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (142 kB)\n","Using cached frozenlist-1.4.1-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (239 kB)\n","Using cached greenlet-3.0.3-cp310-cp310-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl (616 kB)\n","Using cached idna-3.7-py3-none-any.whl (66 kB)\n","Using cached jsonpatch-1.33-py2.py3-none-any.whl (12 kB)\n","Using cached multidict-6.0.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (124 kB)\n","Using cached orjson-3.10.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (141 kB)\n","Using cached packaging-24.1-py3-none-any.whl (53 kB)\n","Using cached typing_extensions-4.12.2-py3-none-any.whl (37 kB)\n","Downloading urllib3-2.2.2-py3-none-any.whl (121 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m121.4/121.4 kB\u001b[0m \u001b[31m6.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hUsing cached yarl-1.9.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (301 kB)\n","Using cached jsonpointer-3.0.0-py2.py3-none-any.whl (7.6 kB)\n","Installing collected packages: urllib3, typing-extensions, tenacity, PyYAML, packaging, orjson, numpy, multidict, jsonpointer, idna, greenlet, frozenlist, charset-normalizer, certifi, attrs, async-timeout, annotated-types, aiohappyeyeballs, yarl, SQLAlchemy, requests, pydantic-core, jsonpatch, aiosignal, pydantic, aiohttp, langsmith, langchain-core, langchain-text-splitters, langchain\n","  Attempting uninstall: urllib3\n","    Found existing installation: urllib3 2.0.7\n","    Uninstalling urllib3-2.0.7:\n","      Successfully uninstalled urllib3-2.0.7\n","  Attempting uninstall: typing-extensions\n","    Found existing installation: typing_extensions 4.12.2\n","    Uninstalling typing_extensions-4.12.2:\n","\u001b[31mERROR: Operation cancelled by user\u001b[0m\u001b[31m\n","\u001b[0mCollecting pypdf\n","  Using cached pypdf-4.3.1-py3-none-any.whl.metadata (7.4 kB)\n","Collecting typing_extensions>=4.0 (from pypdf)\n","  Using cached typing_extensions-4.12.2-py3-none-any.whl.metadata (3.0 kB)\n","Using cached pypdf-4.3.1-py3-none-any.whl (295 kB)\n","Using cached typing_extensions-4.12.2-py3-none-any.whl (37 kB)\n","Installing collected packages: typing_extensions, pypdf\n","  Attempting uninstall: typing_extensions\n","    Found existing installation: typing_extensions 4.12.2\n","    Uninstalling typing_extensions-4.12.2:\n","\u001b[31mERROR: Operation cancelled by user\u001b[0m\u001b[31m\n","\u001b[0mCollecting langchain-community\n","  Using cached langchain_community-0.2.11-py3-none-any.whl.metadata (2.7 kB)\n","Collecting PyYAML>=5.3 (from langchain-community)\n","  Using cached PyYAML-6.0.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.1 kB)\n","Collecting SQLAlchemy<3,>=1.4 (from langchain-community)\n","  Using cached SQLAlchemy-2.0.32-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.6 kB)\n","Collecting aiohttp<4.0.0,>=3.8.3 (from langchain-community)\n","  Using cached aiohttp-3.10.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (7.5 kB)\n","Collecting dataclasses-json<0.7,>=0.5.7 (from langchain-community)\n","  Using cached dataclasses_json-0.6.7-py3-none-any.whl.metadata (25 kB)\n","Collecting langchain<0.3.0,>=0.2.12 (from langchain-community)\n","  Using cached langchain-0.2.12-py3-none-any.whl.metadata (7.1 kB)\n","Collecting langchain-core<0.3.0,>=0.2.27 (from langchain-community)\n","  Using cached langchain_core-0.2.28-py3-none-any.whl.metadata (6.2 kB)\n","Collecting langsmith<0.2.0,>=0.1.0 (from langchain-community)\n","  Using cached langsmith-0.1.98-py3-none-any.whl.metadata (13 kB)\n","Collecting numpy<2,>=1 (from langchain-community)\n","  Using cached numpy-1.26.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (61 kB)\n","Collecting requests<3,>=2 (from langchain-community)\n","  Using cached requests-2.32.3-py3-none-any.whl.metadata (4.6 kB)\n","Collecting tenacity!=8.4.0,<9.0.0,>=8.1.0 (from langchain-community)\n","  Using cached tenacity-8.5.0-py3-none-any.whl.metadata (1.2 kB)\n","Collecting aiohappyeyeballs>=2.3.0 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Using cached aiohappyeyeballs-2.3.4-py3-none-any.whl.metadata (5.6 kB)\n","Collecting aiosignal>=1.1.2 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Using cached aiosignal-1.3.1-py3-none-any.whl.metadata (4.0 kB)\n","Collecting attrs>=17.3.0 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Using cached attrs-24.2.0-py3-none-any.whl.metadata (11 kB)\n","Collecting frozenlist>=1.1.1 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Using cached frozenlist-1.4.1-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (12 kB)\n","Collecting multidict<7.0,>=4.5 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Using cached multidict-6.0.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.2 kB)\n","Collecting yarl<2.0,>=1.0 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Using cached yarl-1.9.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (31 kB)\n","Collecting async-timeout<5.0,>=4.0 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Using cached async_timeout-4.0.3-py3-none-any.whl.metadata (4.2 kB)\n","Collecting marshmallow<4.0.0,>=3.18.0 (from dataclasses-json<0.7,>=0.5.7->langchain-community)\n","  Using cached marshmallow-3.21.3-py3-none-any.whl.metadata (7.1 kB)\n","Collecting typing-inspect<1,>=0.4.0 (from dataclasses-json<0.7,>=0.5.7->langchain-community)\n","  Using cached typing_inspect-0.9.0-py3-none-any.whl.metadata (1.5 kB)\n","Collecting langchain-text-splitters<0.3.0,>=0.2.0 (from langchain<0.3.0,>=0.2.12->langchain-community)\n","  Using cached langchain_text_splitters-0.2.2-py3-none-any.whl.metadata (2.1 kB)\n","Collecting pydantic<3,>=1 (from langchain<0.3.0,>=0.2.12->langchain-community)\n","  Using cached pydantic-2.8.2-py3-none-any.whl.metadata (125 kB)\n","Collecting jsonpatch<2.0,>=1.33 (from langchain-core<0.3.0,>=0.2.27->langchain-community)\n","  Using cached jsonpatch-1.33-py2.py3-none-any.whl.metadata (3.0 kB)\n","Collecting packaging<25,>=23.2 (from langchain-core<0.3.0,>=0.2.27->langchain-community)\n","  Using cached packaging-24.1-py3-none-any.whl.metadata (3.2 kB)\n","Collecting typing-extensions>=4.7 (from langchain-core<0.3.0,>=0.2.27->langchain-community)\n","  Using cached typing_extensions-4.12.2-py3-none-any.whl.metadata (3.0 kB)\n","Collecting orjson<4.0.0,>=3.9.14 (from langsmith<0.2.0,>=0.1.0->langchain-community)\n","  Using cached orjson-3.10.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (50 kB)\n","Collecting charset-normalizer<4,>=2 (from requests<3,>=2->langchain-community)\n","  Using cached charset_normalizer-3.3.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (33 kB)\n","Collecting idna<4,>=2.5 (from requests<3,>=2->langchain-community)\n","  Using cached idna-3.7-py3-none-any.whl.metadata (9.9 kB)\n","Collecting urllib3<3,>=1.21.1 (from requests<3,>=2->langchain-community)\n","  Using cached urllib3-2.2.2-py3-none-any.whl.metadata (6.4 kB)\n","Collecting certifi>=2017.4.17 (from requests<3,>=2->langchain-community)\n","  Using cached certifi-2024.7.4-py3-none-any.whl.metadata (2.2 kB)\n","Collecting greenlet!=0.4.17 (from SQLAlchemy<3,>=1.4->langchain-community)\n","  Using cached greenlet-3.0.3-cp310-cp310-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl.metadata (3.8 kB)\n","Collecting jsonpointer>=1.9 (from jsonpatch<2.0,>=1.33->langchain-core<0.3.0,>=0.2.27->langchain-community)\n","  Using cached jsonpointer-3.0.0-py2.py3-none-any.whl.metadata (2.3 kB)\n","Collecting annotated-types>=0.4.0 (from pydantic<3,>=1->langchain<0.3.0,>=0.2.12->langchain-community)\n","  Using cached annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)\n","\u001b[31mERROR: Operation cancelled by user\u001b[0m\u001b[31m\n","\u001b[0m"]}]},{"cell_type":"markdown","source":["### PDFs"],"metadata":{"id":"aKoWCLksOPeH"}},{"cell_type":"code","source":["from langchain.document_loaders import PyPDFLoader\n","loader = PyPDFLoader(\"https://ai.stanford.edu/~nilsson/MLBOOK.pdf\")\n","pages = loader.load()"],"metadata":{"id":"u_Qp9Yvf2N7Q","executionInfo":{"status":"ok","timestamp":1722972346552,"user_tz":-330,"elapsed":20536,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":312,"outputs":[]},{"cell_type":"code","source":["len(pages)"],"metadata":{"id":"ej-7Yauu2SYq","executionInfo":{"status":"ok","timestamp":1722972346552,"user_tz":-330,"elapsed":3,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"colab":{"base_uri":"https://localhost:8080/"},"outputId":"bca9041a-fda5-431e-9bd6-e789bede951d"},"execution_count":313,"outputs":[{"output_type":"execute_result","data":{"text/plain":["188"]},"metadata":{},"execution_count":313}]},{"cell_type":"code","source":["page = pages[0]"],"metadata":{"id":"xQzfUxda2TpZ","executionInfo":{"status":"ok","timestamp":1722972346552,"user_tz":-330,"elapsed":2,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":314,"outputs":[]},{"cell_type":"code","source":["print(page.page_content[0:500])"],"metadata":{"id":"ietNVsA22Uv2","executionInfo":{"status":"ok","timestamp":1722972346552,"user_tz":-330,"elapsed":2,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"colab":{"base_uri":"https://localhost:8080/"},"outputId":"8c7758ed-e8da-4f7a-d33b-9d53a30a1e83"},"execution_count":315,"outputs":[{"output_type":"stream","name":"stdout","text":["INTRODUCTION\n","TO\n","MACHINE LEARNING\n","AN EARLY DRAFT OF A PROPOSED\n","TEXTBOOK\n","Nils J. Nilsson\n","Robotics Laboratory\n","Department of Computer Science\n","Stanford University\n","Stanford, CA 94305\n","e-mail: nilsson@cs.stanford.edu\n","November 3, 1998\n","Copyright c⃝2005 Nils J. Nilsson\n","This material may not be copied, reproduced, or distributed without the\n","written permission of the copyright holder.\n"]}]},{"cell_type":"code","source":["page.metadata"],"metadata":{"id":"qmNpjpqm2WNk","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1722972346552,"user_tz":-330,"elapsed":2,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"dcd648d6-c3a0-47fd-9291-cc993e8e8da7"},"execution_count":316,"outputs":[{"output_type":"execute_result","data":{"text/plain":["{'source': 'https://ai.stanford.edu/~nilsson/MLBOOK.pdf', 'page': 0}"]},"metadata":{},"execution_count":316}]},{"cell_type":"markdown","source":["### YouTube"],"metadata":{"id":"5U4AIWlgORyk"}},{"cell_type":"code","source":["!pip install langchain pytube\n","!pip install openai-whisper"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"_ULfDi3qPaWD","executionInfo":{"status":"ok","timestamp":1722972359672,"user_tz":-330,"elapsed":13122,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"4c1f9d0f-ef6d-4a06-ff3a-89e0c012375b"},"execution_count":317,"outputs":[{"output_type":"stream","name":"stdout","text":["Requirement already satisfied: langchain in /usr/local/lib/python3.10/dist-packages (0.2.12)\n","Requirement already satisfied: pytube in /usr/local/lib/python3.10/dist-packages (15.0.0)\n","Requirement already satisfied: PyYAML>=5.3 in /usr/local/lib/python3.10/dist-packages (from langchain) (6.0.1)\n","Requirement already satisfied: SQLAlchemy<3,>=1.4 in /usr/local/lib/python3.10/dist-packages (from langchain) (2.0.31)\n","Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /usr/local/lib/python3.10/dist-packages (from langchain) (3.10.0)\n","Requirement already satisfied: async-timeout<5.0.0,>=4.0.0 in /usr/local/lib/python3.10/dist-packages (from langchain) (4.0.3)\n","Requirement already satisfied: langchain-core<0.3.0,>=0.2.27 in /usr/local/lib/python3.10/dist-packages (from langchain) (0.2.28)\n","Requirement already satisfied: langchain-text-splitters<0.3.0,>=0.2.0 in /usr/local/lib/python3.10/dist-packages (from langchain) (0.2.2)\n","Requirement already satisfied: langsmith<0.2.0,>=0.1.17 in /usr/local/lib/python3.10/dist-packages (from langchain) (0.1.98)\n","Requirement already satisfied: numpy<2,>=1 in /usr/local/lib/python3.10/dist-packages (from langchain) (1.26.4)\n","Requirement already satisfied: pydantic<3,>=1 in /usr/local/lib/python3.10/dist-packages (from langchain) (2.8.2)\n","Requirement already satisfied: requests<3,>=2 in /usr/local/lib/python3.10/dist-packages (from langchain) (2.32.3)\n","Requirement already satisfied: tenacity!=8.4.0,<9.0.0,>=8.1.0 in /usr/local/lib/python3.10/dist-packages (from langchain) (8.5.0)\n","Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /usr/local/lib/python3.10/dist-packages (from aiohttp<4.0.0,>=3.8.3->langchain) (2.3.4)\n","Requirement already satisfied: aiosignal>=1.1.2 in /usr/local/lib/python3.10/dist-packages (from aiohttp<4.0.0,>=3.8.3->langchain) (1.3.1)\n","Requirement already satisfied: attrs>=17.3.0 in /usr/local/lib/python3.10/dist-packages (from aiohttp<4.0.0,>=3.8.3->langchain) (23.2.0)\n","Requirement already satisfied: frozenlist>=1.1.1 in /usr/local/lib/python3.10/dist-packages (from aiohttp<4.0.0,>=3.8.3->langchain) (1.4.1)\n","Requirement already satisfied: multidict<7.0,>=4.5 in /usr/local/lib/python3.10/dist-packages (from aiohttp<4.0.0,>=3.8.3->langchain) (6.0.5)\n","Requirement already satisfied: yarl<2.0,>=1.0 in /usr/local/lib/python3.10/dist-packages (from aiohttp<4.0.0,>=3.8.3->langchain) (1.9.4)\n","Requirement already satisfied: jsonpatch<2.0,>=1.33 in /usr/local/lib/python3.10/dist-packages (from langchain-core<0.3.0,>=0.2.27->langchain) (1.33)\n","Requirement already satisfied: packaging<25,>=23.2 in /usr/local/lib/python3.10/dist-packages (from langchain-core<0.3.0,>=0.2.27->langchain) (24.1)\n","Requirement already satisfied: typing-extensions>=4.7 in /usr/local/lib/python3.10/dist-packages (from langchain-core<0.3.0,>=0.2.27->langchain) (4.12.2)\n","Requirement already satisfied: orjson<4.0.0,>=3.9.14 in /usr/local/lib/python3.10/dist-packages (from langsmith<0.2.0,>=0.1.17->langchain) (3.10.6)\n","Requirement already satisfied: annotated-types>=0.4.0 in /usr/local/lib/python3.10/dist-packages (from pydantic<3,>=1->langchain) (0.7.0)\n","Requirement already satisfied: pydantic-core==2.20.1 in /usr/local/lib/python3.10/dist-packages (from pydantic<3,>=1->langchain) (2.20.1)\n","Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests<3,>=2->langchain) (3.3.2)\n","Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests<3,>=2->langchain) (3.7)\n","Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests<3,>=2->langchain) (2.0.7)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests<3,>=2->langchain) (2024.7.4)\n","Requirement already satisfied: greenlet!=0.4.17 in /usr/local/lib/python3.10/dist-packages (from SQLAlchemy<3,>=1.4->langchain) (3.0.3)\n","Requirement already satisfied: jsonpointer>=1.9 in /usr/local/lib/python3.10/dist-packages (from jsonpatch<2.0,>=1.33->langchain-core<0.3.0,>=0.2.27->langchain) (3.0.0)\n","Requirement already satisfied: openai-whisper in /usr/local/lib/python3.10/dist-packages (20231117)\n","Requirement already satisfied: triton<3,>=2.0.0 in /usr/local/lib/python3.10/dist-packages (from openai-whisper) (2.3.1)\n","Requirement already satisfied: numba in /usr/local/lib/python3.10/dist-packages (from openai-whisper) (0.60.0)\n","Requirement already satisfied: numpy in /usr/local/lib/python3.10/dist-packages (from openai-whisper) (1.26.4)\n","Requirement already satisfied: torch in /usr/local/lib/python3.10/dist-packages (from openai-whisper) (2.3.1+cu121)\n","Requirement already satisfied: tqdm in /usr/local/lib/python3.10/dist-packages (from openai-whisper) (4.66.4)\n","Requirement already satisfied: more-itertools in /usr/local/lib/python3.10/dist-packages (from openai-whisper) (10.3.0)\n","Requirement already satisfied: tiktoken in /usr/local/lib/python3.10/dist-packages (from openai-whisper) (0.7.0)\n","Requirement already satisfied: filelock in /usr/local/lib/python3.10/dist-packages (from triton<3,>=2.0.0->openai-whisper) (3.15.4)\n","Requirement already satisfied: llvmlite<0.44,>=0.43.0dev0 in /usr/local/lib/python3.10/dist-packages (from numba->openai-whisper) (0.43.0)\n","Requirement already satisfied: regex>=2022.1.18 in /usr/local/lib/python3.10/dist-packages (from tiktoken->openai-whisper) (2024.5.15)\n","Requirement already satisfied: requests>=2.26.0 in /usr/local/lib/python3.10/dist-packages (from tiktoken->openai-whisper) (2.32.3)\n","Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (4.12.2)\n","Requirement already satisfied: sympy in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (1.13.1)\n","Requirement already satisfied: networkx in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (3.3)\n","Requirement already satisfied: jinja2 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (3.1.4)\n","Requirement already satisfied: fsspec in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (2024.6.1)\n","Requirement already satisfied: nvidia-cuda-nvrtc-cu12==12.1.105 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (12.1.105)\n","Requirement already satisfied: nvidia-cuda-runtime-cu12==12.1.105 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (12.1.105)\n","Requirement already satisfied: nvidia-cuda-cupti-cu12==12.1.105 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (12.1.105)\n","Requirement already satisfied: nvidia-cudnn-cu12==8.9.2.26 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (8.9.2.26)\n","Requirement already satisfied: nvidia-cublas-cu12==12.1.3.1 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (12.1.3.1)\n","Requirement already satisfied: nvidia-cufft-cu12==11.0.2.54 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (11.0.2.54)\n","Requirement already satisfied: nvidia-curand-cu12==10.3.2.106 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (10.3.2.106)\n","Requirement already satisfied: nvidia-cusolver-cu12==11.4.5.107 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (11.4.5.107)\n","Requirement already satisfied: nvidia-cusparse-cu12==12.1.0.106 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (12.1.0.106)\n","Requirement already satisfied: nvidia-nccl-cu12==2.20.5 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (2.20.5)\n","Requirement already satisfied: nvidia-nvtx-cu12==12.1.105 in /usr/local/lib/python3.10/dist-packages (from torch->openai-whisper) (12.1.105)\n","Requirement already satisfied: nvidia-nvjitlink-cu12 in /usr/local/lib/python3.10/dist-packages (from nvidia-cusolver-cu12==11.4.5.107->torch->openai-whisper) (12.6.20)\n","Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken->openai-whisper) (3.3.2)\n","Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken->openai-whisper) (3.7)\n","Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken->openai-whisper) (2.0.7)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken->openai-whisper) (2024.7.4)\n","Requirement already satisfied: MarkupSafe>=2.0 in /usr/local/lib/python3.10/dist-packages (from jinja2->torch->openai-whisper) (2.1.5)\n","Requirement already satisfied: mpmath<1.4,>=1.1.0 in /usr/local/lib/python3.10/dist-packages (from sympy->torch->openai-whisper) (1.3.0)\n"]}]},{"cell_type":"code","source":["from langchain_community.document_loaders.generic import GenericLoader\n","from langchain_community.document_loaders.blob_loaders.youtube_audio import YoutubeAudioLoader"],"metadata":{"id":"nNxS93OLWS1I","executionInfo":{"status":"ok","timestamp":1722972359672,"user_tz":-330,"elapsed":4,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":318,"outputs":[]},{"cell_type":"code","source":["from langchain.document_loaders.parsers.audio import OpenAIWhisperParser\n","# from langchain.document_parsers import OpenAIWhisperParser\n","\n","url = \"https://www.youtube.com/watch?v=jGwO_UgTS7I\"\n","save_dir = \"/content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/youtube/\"\n","loader = GenericLoader(\n","    YoutubeAudioLoader([url], save_dir),\n","    OpenAIWhisperParser(api_key=api_key)\n",")\n","docs = loader.load()\n"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"YNvRDUA3WJCS","executionInfo":{"status":"ok","timestamp":1722972734430,"user_tz":-330,"elapsed":374761,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"2024f659-b579-43f0-e751-4f6838a6b989"},"execution_count":319,"outputs":[{"output_type":"stream","name":"stdout","text":["[youtube] Extracting URL: https://www.youtube.com/watch?v=jGwO_UgTS7I\n","[youtube] jGwO_UgTS7I: Downloading webpage\n","[youtube] jGwO_UgTS7I: Downloading ios player API JSON\n","[youtube] jGwO_UgTS7I: Downloading web creator player API JSON\n","[youtube] jGwO_UgTS7I: Downloading m3u8 information\n","[info] jGwO_UgTS7I: Downloading 1 format(s): 140\n","[download] /content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/youtube//Stanford CS229： Machine Learning Course, Lecture 1 - Andrew Ng (Autumn 2018).m4a has already been downloaded\n","[download] 100% of   69.71MiB\n","[ExtractAudio] Not converting audio /content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/youtube//Stanford CS229： Machine Learning Course, Lecture 1 - Andrew Ng (Autumn 2018).m4a; file is already in target format m4a\n","Transcribing part 1!\n","Transcribing part 2!\n","Transcribing part 3!\n","Transcribing part 4!\n"]}]},{"cell_type":"code","source":["# url=\"https://www.youtube.com/watch?v=jGwO_UgTS7I\"\n","# save_dir=\"docs/youtube/\"\n","# loader = GenericLoader(\n","#     YoutubeAudioLoader([url],save_dir),\n","#     OpenAIWhisperParser()\n","# )\n","# docs = loader.load()"],"metadata":{"id":"OP6DHdrXOXB_","executionInfo":{"status":"ok","timestamp":1722972734430,"user_tz":-330,"elapsed":7,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":320,"outputs":[]},{"cell_type":"code","source":["docs[0].page_content[0:500]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":87},"id":"DducHz3FOYyi","executionInfo":{"status":"ok","timestamp":1722972734430,"user_tz":-330,"elapsed":6,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"af3140b2-6611-4654-8831-45a0ed2c7369"},"execution_count":321,"outputs":[{"output_type":"execute_result","data":{"text/plain":["\"Welcome to CS229 Machine Learning. Uh, some of you know that this is a class that's taught at Stanford for a long time. And this is often the class that, um, I most look forward to teaching each year because this is where we've helped, I think, several generations of Stanford students become experts in machine learning, got- built many of their products and services and startups that I'm sure, many of you or probably all of you are using, uh, uh, today. Um, so what I want to do today was spend s\""],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":321}]},{"cell_type":"markdown","source":["### URLs"],"metadata":{"id":"ern4b-UfOgOi"}},{"cell_type":"code","source":["from langchain.document_loaders import WebBaseLoader\n","\n","loader = WebBaseLoader(\"https://github.com/basecamp/handbook/blob/master/37signals-is-you.md\")"],"metadata":{"id":"EcVzSCoyOZu9","executionInfo":{"status":"ok","timestamp":1722972734430,"user_tz":-330,"elapsed":4,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":322,"outputs":[]},{"cell_type":"code","source":["docs = loader.load()"],"metadata":{"id":"VholHJnEOiTp","executionInfo":{"status":"ok","timestamp":1722972735468,"user_tz":-330,"elapsed":1042,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":323,"outputs":[]},{"cell_type":"code","source":["print(docs[0].page_content[:500])"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"6Yq61mwLOjRk","executionInfo":{"status":"ok","timestamp":1722972735468,"user_tz":-330,"elapsed":27,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"2c4c7d84-40ad-4759-d34f-41e76c656d88"},"execution_count":324,"outputs":[{"output_type":"stream","name":"stdout","text":["\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","File not found · GitHub\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","Skip to content\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","Navigation Menu\n","\n","Toggle navigation\n","\n","\n","\n","\n","\n","\n","\n","\n","\n"," \n","\n","\n","\n","\n","\n","\n","\n","\n","            Sign in\n","          \n","\n","\n","\n","\n","\n","\n","\n","\n","        Product\n","        \n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","Actions\n","        Automate any workflow\n","      \n","\n","\n","\n","\n","\n","\n","\n","Packages\n","        Host and manage packages\n","      \n","\n","\n","\n","\n","\n","\n","\n","Security\n","        Find and fix vulnerabilities\n","      \n","\n","\n","\n","\n","\n","\n","\n","Code\n"]}]},{"cell_type":"markdown","source":["### Notion"],"metadata":{"id":"rSPbfZyFOoEI"}},{"cell_type":"code","source":["from langchain.document_loaders import NotionDirectoryLoader\n","loader = NotionDirectoryLoader(\"docs/Notion_DB\")\n","docs = loader.load()"],"metadata":{"id":"V8QDJxJGOkbC","executionInfo":{"status":"ok","timestamp":1722972735468,"user_tz":-330,"elapsed":25,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":325,"outputs":[]},{"cell_type":"code","source":["print(docs[0].page_content[0:200])"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":141},"id":"UmBYEaXqukr2","executionInfo":{"status":"error","timestamp":1722972735468,"user_tz":-330,"elapsed":25,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"b1dc240e-c1de-47b0-af73-54dbc092522f"},"execution_count":326,"outputs":[{"output_type":"error","ename":"IndexError","evalue":"list index out of range","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mIndexError\u001b[0m                                Traceback (most recent call last)","\u001b[0;32m<ipython-input-326-59fb17fc507e>\u001b[0m in \u001b[0;36m<cell line: 1>\u001b[0;34m()\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0mprint\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mdocs\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;36m0\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mpage_content\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;36m0\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;36m200\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mIndexError\u001b[0m: list index out of range"]}]},{"cell_type":"code","source":["docs[0].metadata"],"metadata":{"id":"al1r73Uaul1m","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":24,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["## 3. Document Splitting"],"metadata":{"id":"j4QpRyeOvv2Y"}},{"cell_type":"code","source":["from langchain.text_splitter import RecursiveCharacterTextSplitter, CharacterTextSplitter"],"metadata":{"id":"f5vlMHBXum97","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":24,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["chunk_size =26\n","chunk_overlap = 4"],"metadata":{"id":"giWomIu4w1ic","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":23,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["r_splitter = RecursiveCharacterTextSplitter(\n","    chunk_size=chunk_size,\n","    chunk_overlap=chunk_overlap\n",")\n","c_splitter = CharacterTextSplitter(\n","    chunk_size=chunk_size,\n","    chunk_overlap=chunk_overlap\n",")"],"metadata":{"id":"48mnIJVPw2si","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":23,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["text1 = 'abcdefghijklmnopqrstuvwxyz'"],"metadata":{"id":"0W3DjSZnw3x_","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":23,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["r_splitter.split_text(text1)"],"metadata":{"id":"_VZ3q4zFw4xN","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":23,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["text2 = 'abcdefghijklmnopqrstuvwxyzabcdefg'"],"metadata":{"id":"9mpLFNBbw5p4","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":23,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["r_splitter.split_text(text2)"],"metadata":{"id":"NY1a6VdYw6wE","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":23,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["text3 = \"a b c d e f g h i j k l m n o p q r s t u v w x y z\""],"metadata":{"id":"qML3CA-Lw8DL","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":22,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["r_splitter.split_text(text3)"],"metadata":{"id":"Easn8Oogw9w0","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":22,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["c_splitter.split_text(text3)"],"metadata":{"id":"7PVoGWmww_K1","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":22,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["c_splitter = CharacterTextSplitter(\n","    chunk_size=chunk_size,\n","    chunk_overlap=chunk_overlap,\n","    separator = ' '\n",")\n","c_splitter.split_text(text3)"],"metadata":{"id":"Zllk8Df0xAuh","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":22,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["some_text = \"\"\"When writing documents, writers will use document structure to group content. \\\n","This can convey to the reader, which idea's are related. For example, closely related ideas \\\n","are in sentances. Similar ideas are in paragraphs. Paragraphs form a document. \\n\\n  \\\n","Paragraphs are often delimited with a carriage return or two carriage returns. \\\n","Carriage returns are the \"backslash n\" you see embedded in this string. \\\n","Sentences have a period at the end, but also, have a space.\\\n","and words are separated by space.\"\"\""],"metadata":{"id":"MvbMAo7yxBzc","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":22,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["len(some_text)"],"metadata":{"id":"hZP9q2TnxHkL","executionInfo":{"status":"aborted","timestamp":1722972735468,"user_tz":-330,"elapsed":21,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["c_splitter = CharacterTextSplitter(\n","    chunk_size=450,\n","    chunk_overlap=0,\n","    separator = ' '\n",")\n","r_splitter = RecursiveCharacterTextSplitter(\n","    chunk_size=450,\n","    chunk_overlap=0,\n","    separators=[\"\\n\\n\", \"\\n\", \" \", \"\"]\n",")"],"metadata":{"id":"X7TewpC1xIkd","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":22,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["c_splitter.split_text(some_text)"],"metadata":{"id":"j5It9_8MxJqD","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":22,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["r_splitter.split_text(some_text)"],"metadata":{"id":"TK-4buFpxLJ3","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":22,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["r_splitter = RecursiveCharacterTextSplitter(\n","    chunk_size=150,\n","    chunk_overlap=0,\n","    separators=[\"\\n\\n\", \"\\n\", \"\\. \", \" \", \"\"]\n",")\n","r_splitter.split_text(some_text)"],"metadata":{"id":"ZTHli353xMeq","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":22,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["r_splitter = RecursiveCharacterTextSplitter(\n","    chunk_size=150,\n","    chunk_overlap=0,\n","    separators=[\"\\n\\n\", \"\\n\", \"(?<=\\. )\", \" \", \"\"]\n",")\n","r_splitter.split_text(some_text)"],"metadata":{"id":"fYAPb2Q_xcjl","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":21,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["from langchain.document_loaders import PyPDFLoader\n","loader = PyPDFLoader(\"https://ai.stanford.edu/~nilsson/MLBOOK.pdf\")\n","pages = loader.load()"],"metadata":{"id":"8QT3ZaBZxd5F","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":21,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["from langchain.text_splitter import CharacterTextSplitter\n","text_splitter = CharacterTextSplitter(\n","    separator=\"\\n\",\n","    chunk_size=1000,\n","    chunk_overlap=150,\n","    length_function=len\n",")"],"metadata":{"id":"3Tc9oA71xjs7","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":21,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs = text_splitter.split_documents(pages)"],"metadata":{"id":"-Ies384Dxk_t","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":21,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["len(docs)"],"metadata":{"id":"MSVTLdonxmOs","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":21,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["len(pages)"],"metadata":{"id":"_VlynlQmxnwg","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":21,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["from langchain.document_loaders import NotionDirectoryLoader\n","loader = NotionDirectoryLoader(\"docs/Notion_DB\")\n","notion_db = loader.load()"],"metadata":{"id":"EZfBxTutxotD","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":21,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs = text_splitter.split_documents(notion_db)"],"metadata":{"id":"HGO2BSsfxqAR","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":20,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["len(notion_db)"],"metadata":{"id":"6O3XcFgnxrG2","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":20,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["len(docs)"],"metadata":{"id":"anCplcgYxsLk","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":20,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Token splitting\n","from langchain.text_splitter import TokenTextSplitter"],"metadata":{"id":"48y8hSSpxtSf","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":18,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["text_splitter = TokenTextSplitter(chunk_size=1, chunk_overlap=0)"],"metadata":{"id":"VkTRywdvxvhp","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":18,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["text1 = \"foo bar bazzyfoo\""],"metadata":{"id":"2EPXWVNYyHVI","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":18,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["text_splitter.split_text(text1)"],"metadata":{"id":"7u_e79PgyJJH","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":18,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["text_splitter = TokenTextSplitter(chunk_size=10, chunk_overlap=0)"],"metadata":{"id":"u7LDOAg9yK5h","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs = text_splitter.split_documents(pages)"],"metadata":{"id":"kpQ6g0avyMyX","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs[0]"],"metadata":{"id":"J6D_2fNgyOFt","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["pages[0].metadata"],"metadata":{"id":"xZ9bC3X5yPvX","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Context Aware Splitting\n","from langchain.document_loaders import NotionDirectoryLoader\n","from langchain.text_splitter import MarkdownHeaderTextSplitter"],"metadata":{"id":"5C3CMHTIyQzr","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["markdown_document = \"\"\"# Title\\n\\n \\\n","## Chapter 1\\n\\n \\\n","Hi this is Jim\\n\\n Hi this is Joe\\n\\n \\\n","### Section \\n\\n \\\n","Hi this is Lance \\n\\n\n","## Chapter 2\\n\\n \\\n","Hi this is Molly\"\"\""],"metadata":{"id":"GXK8ZGH8yaWk","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["headers_to_split_on = [\n","    (\"#\", \"Header 1\"),\n","    (\"##\", \"Header 2\"),\n","    (\"###\", \"Header 3\"),\n","]"],"metadata":{"id":"8hiI2BYdybrH","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["markdown_splitter = MarkdownHeaderTextSplitter(\n","    headers_to_split_on=headers_to_split_on\n",")\n","md_header_splits = markdown_splitter.split_text(markdown_document)"],"metadata":{"id":"Yk9Q-9hhycyd","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["md_header_splits[0]"],"metadata":{"id":"IffFsHOyyd9H","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["md_header_splits[1]"],"metadata":{"id":"LPg72Ljaye3r","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["## 4. Vector Databases"],"metadata":{"id":"ho9Bw_M6ytGg"}},{"cell_type":"code","source":["from langchain.document_loaders import PyPDFLoader\n","\n","# Load PDF\n","loaders = [\n","    # Duplicate documents on purpose - messy data\n","    PyPDFLoader(\"https://cs229.stanford.edu/main_notes.pdf\"),\n","    PyPDFLoader(\"https://cs229.stanford.edu/main_notes.pdf\"),\n","    PyPDFLoader(\"https://www.cs.tufts.edu/comp/105-2017f/readings/ml.pdf\"),\n","    PyPDFLoader(\"https://www.cs.mcgill.ca/~dprecup/courses/ML/Lectures/ml-lecture02.pdf\")\n","]\n","docs = []\n","for loader in loaders:\n","    docs.extend(loader.load())"],"metadata":{"id":"hSl3M7QsygQg","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Split\n","from langchain.text_splitter import RecursiveCharacterTextSplitter\n","text_splitter = RecursiveCharacterTextSplitter(\n","    chunk_size = 1500,\n","    chunk_overlap = 150\n",")"],"metadata":{"id":"7nsva2aa0zHr","executionInfo":{"status":"aborted","timestamp":1722972735469,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["splits = text_splitter.split_documents(docs)"],"metadata":{"id":"rNHqlzZm00r1","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["len(splits)"],"metadata":{"id":"_TAPlqjh019W","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Embeddings\n","from langchain.embeddings.openai import OpenAIEmbeddings\n","embedding = OpenAIEmbeddings(openai_api_key=api_key)"],"metadata":{"id":"wPU6tSsn026w","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":17,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["sentence1 = \"i like dogs\"\n","sentence2 = \"i like canines\"\n","sentence3 = \"the weather is ugly outside\""],"metadata":{"id":"vE71-k4307jn","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["embedding1 = embedding.embed_query(sentence1)\n","embedding2 = embedding.embed_query(sentence2)\n","embedding3 = embedding.embed_query(sentence3)"],"metadata":{"id":"2gsWQjX709WD","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["import numpy as np"],"metadata":{"id":"Z1liGqQ70-r_","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["np.dot(embedding1, embedding2)"],"metadata":{"id":"cF-IWgvy0_tB","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["np.dot(embedding1, embedding3)"],"metadata":{"id":"LvFfV5mf1A3a","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["np.dot(embedding2, embedding3)"],"metadata":{"id":"JPe6Iemr1CeX","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Vectorstores\n","! pip install chromadb"],"metadata":{"id":"PACfAkJw1Dsq","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["from langchain.vectorstores import Chroma"],"metadata":{"id":"iVQnAgIY1HXm","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["persist_directory = '/content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/chroma2/'"],"metadata":{"id":"xqjNHL9u1IwP","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# !rm -rf \"/content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/chroma2\"  # remove old database files if any\n","!mkdir \"/content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/chroma2\""],"metadata":{"id":"rmR_dtHE1Qrn","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["!ls \"/content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/\""],"metadata":{"id":"jijxeiG73V6Q","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["!chmod 777 \"/content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/chroma2\"\n","\n","vectordb = Chroma.from_documents(\n","    documents=splits,\n","    embedding=embedding,\n","    persist_directory=persist_directory\n",")"],"metadata":{"id":"RkdG8O2v2U8U","executionInfo":{"status":"aborted","timestamp":1722972735470,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["print(vectordb._collection.count())"],"metadata":{"id":"8rbq1Gsb1Y9V","executionInfo":{"status":"aborted","timestamp":1722972735471,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"is there an email i can ask for help\""],"metadata":{"id":"8BnX5QWg1Z72","executionInfo":{"status":"aborted","timestamp":1722972735471,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs = vectordb.similarity_search(question,k=3)"],"metadata":{"id":"POgZP0Mn1bJ4","executionInfo":{"status":"aborted","timestamp":1722972735471,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["len(docs)"],"metadata":{"id":"OVdxv7Zm1cMy","executionInfo":{"status":"aborted","timestamp":1722972735471,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs[0].page_content"],"metadata":{"id":"NZjpHiBa1dmg","executionInfo":{"status":"aborted","timestamp":1722972735471,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["vectordb.persist()"],"metadata":{"id":"ZAWBPeAi1eiN","executionInfo":{"status":"aborted","timestamp":1722972735471,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"what did they say about matlab?\"\n"],"metadata":{"id":"2ZZNU_vH1f6R","executionInfo":{"status":"aborted","timestamp":1722972735471,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs = vectordb.similarity_search(question,k=5)"],"metadata":{"id":"eXkuTchs1hb0","executionInfo":{"status":"aborted","timestamp":1722972735471,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs[0]"],"metadata":{"id":"EtvtYFIJ1jGg","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs[1]"],"metadata":{"id":"hFMTvX2K10U1","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"what did they say about regression in the third lecture?\""],"metadata":{"id":"Z9-OK-uD11QI","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs = vectordb.similarity_search(question,k=5)"],"metadata":{"id":"oNO3biyl12f_","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["for doc in docs:\n","    print(doc.metadata)"],"metadata":{"id":"Yu1DHNaF13gY","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["print(docs[4].page_content)"],"metadata":{"id":"XI_KdyJQ14oQ","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["## 5. Retrieval"],"metadata":{"id":"9ZepBuiK17L-"}},{"cell_type":"code","source":["!pip install lark"],"metadata":{"id":"y8itZKJH15gk","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["from langchain.vectorstores import Chroma\n","from langchain.embeddings.openai import OpenAIEmbeddings\n","persist_directory = '/content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/chroma2/'"],"metadata":{"id":"HG9AqOvY7Y4U","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["embedding = OpenAIEmbeddings(openai_api_key=api_key)\n","vectordb = Chroma(\n","    persist_directory=persist_directory,\n","    embedding_function=embedding\n",")"],"metadata":{"id":"HazSgp5G8XMg","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["print(vectordb._collection.count())"],"metadata":{"id":"mjxKTsqy8aW6","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["texts = [\n","    \"\"\"The Amanita phalloides has a large and imposing epigeous (aboveground) fruiting body (basidiocarp).\"\"\",\n","    \"\"\"A mushroom with a large fruiting body is the Amanita phalloides. Some varieties are all-white.\"\"\",\n","    \"\"\"A. phalloides, a.k.a Death Cap, is one of the most poisonous of all known mushrooms.\"\"\",\n","]"],"metadata":{"id":"EiY38dV98bsy","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["smalldb = Chroma.from_texts(texts, embedding=embedding)"],"metadata":{"id":"kovO7sVZ8dzG","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"Tell me about all-white mushrooms with large fruiting bodies\""],"metadata":{"id":"p2rS16AY8fI8","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["smalldb.similarity_search(question, k=2)"],"metadata":{"id":"CF5b3Qy68gyH","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["smalldb.max_marginal_relevance_search(question,k=2, fetch_k=3)"],"metadata":{"id":"QWNOxAn98h9o","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["### Maximum Marginal Relevance (MMR)"],"metadata":{"id":"ApZ0pPcC8lpA"}},{"cell_type":"code","source":["question = \"what did they say about matlab?\"\n","docs_ss = vectordb.similarity_search(question,k=3)"],"metadata":{"id":"JHk8f9Vm8jX-","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs_ss[0].page_content[:100]"],"metadata":{"id":"RKZNK9N98pKr","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs_ss[1].page_content[:100]"],"metadata":{"id":"RlSiq7It8qTa","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs_mmr = vectordb.max_marginal_relevance_search(question,k=3)"],"metadata":{"id":"kE_mg74p8rRa","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs_mmr[0].page_content[:100]"],"metadata":{"id":"xdHZqhLi8s7K","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs_mmr[1].page_content[:100]"],"metadata":{"id":"wCVbH2PP8uHF","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"what did they say about regression in the third lecture?\""],"metadata":{"id":"7S-COAqx8vNw","executionInfo":{"status":"aborted","timestamp":1722972735472,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs = vectordb.similarity_search(\n","    question,\n","    k=3,\n","    filter={\"source\":\"docs/cs229_lectures/MachineLearning-Lecture03.pdf\"}\n",")"],"metadata":{"id":"Rao0zLSb8xei","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["for d in docs:\n","    print(d.metadata)"],"metadata":{"id":"imKCrJ-A8yqC","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["from langchain.llms import OpenAI\n","from langchain.retrievers.self_query.base import SelfQueryRetriever\n","from langchain.chains.query_constructor.base import AttributeInfo"],"metadata":{"id":"LnTPJSAU8zuq","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["metadata_field_info = [\n","    AttributeInfo(\n","        name=\"source\",\n","        description=\"The lecture the chunk is from, should be one of `docs/cs229_lectures/MachineLearning-Lecture01.pdf`, `docs/cs229_lectures/MachineLearning-Lecture02.pdf`, or `docs/cs229_lectures/MachineLearning-Lecture03.pdf`\",\n","        type=\"string\",\n","    ),\n","    AttributeInfo(\n","        name=\"page\",\n","        description=\"The page from the lecture\",\n","        type=\"integer\",\n","    ),\n","]"],"metadata":{"id":"UuXUv8Ox81gc","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["document_content_description = \"Lecture notes\"\n","llm = OpenAI(model='gpt-3.5-turbo-instruct', temperature=0,openai_api_key=api_key)\n","retriever = SelfQueryRetriever.from_llm(\n","    llm,\n","    vectordb,\n","    document_content_description,\n","    metadata_field_info,\n","    verbose=True\n",")"],"metadata":{"id":"ZAErKOUm82zy","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"what did they say about regression in the third lecture?\""],"metadata":{"id":"mRO_ydM585ce","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":14,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["docs = retriever.get_relevant_documents(question)"],"metadata":{"id":"EUKFjNwn8-qe","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["for d in docs:\n","    print(d.metadata)"],"metadata":{"id":"xjOAEN8n9ABX","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["### Compression"],"metadata":{"id":"ffZv9wh-97AF"}},{"cell_type":"code","source":["from langchain.retrievers import ContextualCompressionRetriever\n","from langchain.retrievers.document_compressors import LLMChainExtractor"],"metadata":{"id":"4dhph8_L9BSr","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["def pretty_print_docs(docs):\n","    print(f\"\\n{'-' * 100}\\n\".join([f\"Document {i+1}:\\n\\n\" + d.page_content for i, d in enumerate(docs)]))\n"],"metadata":{"id":"ai2oQ9xv96ro","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Wrap our vectorstore\n","llm = OpenAI(temperature=0, model=\"gpt-3.5-turbo-instruct\",openai_api_key=api_key)\n","compressor = LLMChainExtractor.from_llm(llm)"],"metadata":{"id":"P6pIpk5W991w","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["compression_retriever = ContextualCompressionRetriever(\n","    base_compressor=compressor,\n","    base_retriever=vectordb.as_retriever()\n",")"],"metadata":{"id":"9CqPAZQ69-t8","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"what did they say about matlab?\"\n","compressed_docs = compression_retriever.get_relevant_documents(question)\n","pretty_print_docs(compressed_docs)"],"metadata":{"id":"0zh4zomq9_7T","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["compression_retriever = ContextualCompressionRetriever(\n","    base_compressor=compressor,\n","    base_retriever=vectordb.as_retriever(search_type = \"mmr\")\n",")"],"metadata":{"id":"jP16g1nL-EcY","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"what did they say about matlab?\"\n","compressed_docs = compression_retriever.get_relevant_documents(question)\n","pretty_print_docs(compressed_docs)"],"metadata":{"id":"wCgDwD3e-V9v","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["### Other retrievers"],"metadata":{"id":"FtK6legZ-YgD"}},{"cell_type":"code","source":["from langchain.retrievers import SVMRetriever\n","from langchain.retrievers import TFIDFRetriever\n","from langchain.document_loaders import PyPDFLoader\n","from langchain.text_splitter import RecursiveCharacterTextSplitter"],"metadata":{"id":"z0M5DcC9-XfK","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Load PDF\n","loader = PyPDFLoader(\"https://cs229.stanford.edu/main_notes.pdf\")\n","pages = loader.load()\n","all_page_text=[p.page_content for p in pages]\n","joined_page_text=\" \".join(all_page_text)\n","\n","# Split\n","text_splitter = RecursiveCharacterTextSplitter(chunk_size = 1500,chunk_overlap = 150)\n","splits = text_splitter.split_text(joined_page_text)\n"],"metadata":{"id":"FwO8CT8W-bjb","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Retrieve\n","svm_retriever = SVMRetriever.from_texts(splits,embedding)\n","tfidf_retriever = TFIDFRetriever.from_texts(splits)"],"metadata":{"id":"x-bZxNhJ-h3_","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"What are major topics for this class?\"\n","docs_svm=svm_retriever.get_relevant_documents(question)\n","docs_svm[0]"],"metadata":{"id":"HVJ0kWHG-jLs","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"what did they say about matlab?\"\n","docs_tfidf=tfidf_retriever.get_relevant_documents(question)\n","docs_tfidf[0]"],"metadata":{"id":"_9D6lqW7-kUp","executionInfo":{"status":"aborted","timestamp":1722972735473,"user_tz":-330,"elapsed":13,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["## 6. Question Answering"],"metadata":{"id":"lHKdB3hD-maj"}},{"cell_type":"code","source":["!pip install --force-reinstall --no-cache-dir langchain\n","!pip install --force-reinstall --no-cache-dir pypdf\n","!pip install --force-reinstall --no-cache-dir -U langchain-community"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":1000},"id":"CgppVpIBOKXL","executionInfo":{"status":"ok","timestamp":1722973654969,"user_tz":-330,"elapsed":101020,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"ef825cd6-d23e-4486-b2a7-6fdbd753bde0"},"execution_count":1,"outputs":[{"output_type":"stream","name":"stdout","text":["Collecting langchain\n","  Downloading langchain-0.2.12-py3-none-any.whl.metadata (7.1 kB)\n","Collecting PyYAML>=5.3 (from langchain)\n","  Downloading PyYAML-6.0.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.1 kB)\n","Collecting SQLAlchemy<3,>=1.4 (from langchain)\n","  Downloading SQLAlchemy-2.0.32-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.6 kB)\n","Collecting aiohttp<4.0.0,>=3.8.3 (from langchain)\n","  Downloading aiohttp-3.10.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (7.5 kB)\n","Collecting async-timeout<5.0.0,>=4.0.0 (from langchain)\n","  Downloading async_timeout-4.0.3-py3-none-any.whl.metadata (4.2 kB)\n","Collecting langchain-core<0.3.0,>=0.2.27 (from langchain)\n","  Downloading langchain_core-0.2.28-py3-none-any.whl.metadata (6.2 kB)\n","Collecting langchain-text-splitters<0.3.0,>=0.2.0 (from langchain)\n","  Downloading langchain_text_splitters-0.2.2-py3-none-any.whl.metadata (2.1 kB)\n","Collecting langsmith<0.2.0,>=0.1.17 (from langchain)\n","  Downloading langsmith-0.1.98-py3-none-any.whl.metadata (13 kB)\n","Collecting numpy<2,>=1 (from langchain)\n","  Downloading numpy-1.26.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (61 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m61.0/61.0 kB\u001b[0m \u001b[31m135.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting pydantic<3,>=1 (from langchain)\n","  Downloading pydantic-2.8.2-py3-none-any.whl.metadata (125 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m125.2/125.2 kB\u001b[0m \u001b[31m141.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting requests<3,>=2 (from langchain)\n","  Downloading requests-2.32.3-py3-none-any.whl.metadata (4.6 kB)\n","Collecting tenacity!=8.4.0,<9.0.0,>=8.1.0 (from langchain)\n","  Downloading tenacity-8.5.0-py3-none-any.whl.metadata (1.2 kB)\n","Collecting aiohappyeyeballs>=2.3.0 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Downloading aiohappyeyeballs-2.3.4-py3-none-any.whl.metadata (5.6 kB)\n","Collecting aiosignal>=1.1.2 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Downloading aiosignal-1.3.1-py3-none-any.whl.metadata (4.0 kB)\n","Collecting attrs>=17.3.0 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Downloading attrs-24.2.0-py3-none-any.whl.metadata (11 kB)\n","Collecting frozenlist>=1.1.1 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Downloading frozenlist-1.4.1-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (12 kB)\n","Collecting multidict<7.0,>=4.5 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Downloading multidict-6.0.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.2 kB)\n","Collecting yarl<2.0,>=1.0 (from aiohttp<4.0.0,>=3.8.3->langchain)\n","  Downloading yarl-1.9.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (31 kB)\n","Collecting jsonpatch<2.0,>=1.33 (from langchain-core<0.3.0,>=0.2.27->langchain)\n","  Downloading jsonpatch-1.33-py2.py3-none-any.whl.metadata (3.0 kB)\n","Collecting packaging<25,>=23.2 (from langchain-core<0.3.0,>=0.2.27->langchain)\n","  Downloading packaging-24.1-py3-none-any.whl.metadata (3.2 kB)\n","Collecting typing-extensions>=4.7 (from langchain-core<0.3.0,>=0.2.27->langchain)\n","  Downloading typing_extensions-4.12.2-py3-none-any.whl.metadata (3.0 kB)\n","Collecting orjson<4.0.0,>=3.9.14 (from langsmith<0.2.0,>=0.1.17->langchain)\n","  Downloading orjson-3.10.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (50 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m50.4/50.4 kB\u001b[0m \u001b[31m118.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting annotated-types>=0.4.0 (from pydantic<3,>=1->langchain)\n","  Downloading annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)\n","Collecting pydantic-core==2.20.1 (from pydantic<3,>=1->langchain)\n","  Downloading pydantic_core-2.20.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.6 kB)\n","Collecting charset-normalizer<4,>=2 (from requests<3,>=2->langchain)\n","  Downloading charset_normalizer-3.3.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (33 kB)\n","Collecting idna<4,>=2.5 (from requests<3,>=2->langchain)\n","  Downloading idna-3.7-py3-none-any.whl.metadata (9.9 kB)\n","Collecting urllib3<3,>=1.21.1 (from requests<3,>=2->langchain)\n","  Downloading urllib3-2.2.2-py3-none-any.whl.metadata (6.4 kB)\n","Collecting certifi>=2017.4.17 (from requests<3,>=2->langchain)\n","  Downloading certifi-2024.7.4-py3-none-any.whl.metadata (2.2 kB)\n","Collecting greenlet!=0.4.17 (from SQLAlchemy<3,>=1.4->langchain)\n","  Downloading greenlet-3.0.3-cp310-cp310-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl.metadata (3.8 kB)\n","Collecting jsonpointer>=1.9 (from jsonpatch<2.0,>=1.33->langchain-core<0.3.0,>=0.2.27->langchain)\n","  Downloading jsonpointer-3.0.0-py2.py3-none-any.whl.metadata (2.3 kB)\n","Downloading langchain-0.2.12-py3-none-any.whl (990 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m990.6/990.6 kB\u001b[0m \u001b[31m55.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading aiohttp-3.10.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.2 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m1.2/1.2 MB\u001b[0m \u001b[31m98.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading async_timeout-4.0.3-py3-none-any.whl (5.7 kB)\n","Downloading langchain_core-0.2.28-py3-none-any.whl (379 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m379.9/379.9 kB\u001b[0m \u001b[31m197.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading langchain_text_splitters-0.2.2-py3-none-any.whl (25 kB)\n","Downloading langsmith-0.1.98-py3-none-any.whl (140 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m140.2/140.2 kB\u001b[0m \u001b[31m164.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading numpy-1.26.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (18.2 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m18.2/18.2 MB\u001b[0m \u001b[31m44.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading pydantic-2.8.2-py3-none-any.whl (423 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m423.9/423.9 kB\u001b[0m \u001b[31m179.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading pydantic_core-2.20.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m2.1/2.1 MB\u001b[0m \u001b[31m71.2 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading PyYAML-6.0.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (705 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m705.5/705.5 kB\u001b[0m \u001b[31m149.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading requests-2.32.3-py3-none-any.whl (64 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m64.9/64.9 kB\u001b[0m \u001b[31m129.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading SQLAlchemy-2.0.32-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.1 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m3.1/3.1 MB\u001b[0m \u001b[31m113.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading tenacity-8.5.0-py3-none-any.whl (28 kB)\n","Downloading aiohappyeyeballs-2.3.4-py3-none-any.whl (12 kB)\n","Downloading aiosignal-1.3.1-py3-none-any.whl (7.6 kB)\n","Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)\n","Downloading attrs-24.2.0-py3-none-any.whl (63 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m63.0/63.0 kB\u001b[0m \u001b[31m113.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading certifi-2024.7.4-py3-none-any.whl (162 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m163.0/163.0 kB\u001b[0m \u001b[31m152.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading charset_normalizer-3.3.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (142 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m142.1/142.1 kB\u001b[0m \u001b[31m153.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading frozenlist-1.4.1-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (239 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m239.5/239.5 kB\u001b[0m \u001b[31m186.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading greenlet-3.0.3-cp310-cp310-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl (616 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m616.0/616.0 kB\u001b[0m \u001b[31m137.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading idna-3.7-py3-none-any.whl (66 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m66.8/66.8 kB\u001b[0m \u001b[31m130.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading jsonpatch-1.33-py2.py3-none-any.whl (12 kB)\n","Downloading multidict-6.0.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (124 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m124.3/124.3 kB\u001b[0m \u001b[31m161.2 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading orjson-3.10.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (141 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m141.1/141.1 kB\u001b[0m \u001b[31m170.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading packaging-24.1-py3-none-any.whl (53 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m54.0/54.0 kB\u001b[0m \u001b[31m153.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading typing_extensions-4.12.2-py3-none-any.whl (37 kB)\n","Downloading urllib3-2.2.2-py3-none-any.whl (121 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m121.4/121.4 kB\u001b[0m \u001b[31m173.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading yarl-1.9.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (301 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m301.6/301.6 kB\u001b[0m \u001b[31m130.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading jsonpointer-3.0.0-py2.py3-none-any.whl (7.6 kB)\n","Installing collected packages: urllib3, typing-extensions, tenacity, PyYAML, packaging, orjson, numpy, multidict, jsonpointer, idna, greenlet, frozenlist, charset-normalizer, certifi, attrs, async-timeout, annotated-types, aiohappyeyeballs, yarl, SQLAlchemy, requests, pydantic-core, jsonpatch, aiosignal, pydantic, aiohttp, langsmith, langchain-core, langchain-text-splitters, langchain\n","  Attempting uninstall: urllib3\n","    Found existing installation: urllib3 2.2.2\n","    Uninstalling urllib3-2.2.2:\n","      Successfully uninstalled urllib3-2.2.2\n","  Attempting uninstall: typing-extensions\n","    Found existing installation: typing_extensions 4.12.2\n","    Uninstalling typing_extensions-4.12.2:\n","      Successfully uninstalled typing_extensions-4.12.2\n","  Attempting uninstall: tenacity\n","    Found existing installation: tenacity 8.5.0\n","    Uninstalling tenacity-8.5.0:\n","      Successfully uninstalled tenacity-8.5.0\n","  Attempting uninstall: PyYAML\n","    Found existing installation: PyYAML 6.0.1\n","    Uninstalling PyYAML-6.0.1:\n","      Successfully uninstalled PyYAML-6.0.1\n","  Attempting uninstall: packaging\n","    Found existing installation: packaging 24.1\n","    Uninstalling packaging-24.1:\n","      Successfully uninstalled packaging-24.1\n","  Attempting uninstall: orjson\n","    Found existing installation: orjson 3.10.6\n","    Uninstalling orjson-3.10.6:\n","      Successfully uninstalled orjson-3.10.6\n","  Attempting uninstall: numpy\n","    Found existing installation: numpy 1.26.4\n","    Uninstalling numpy-1.26.4:\n","      Successfully uninstalled numpy-1.26.4\n","  Attempting uninstall: multidict\n","    Found existing installation: multidict 6.0.5\n","    Uninstalling multidict-6.0.5:\n","      Successfully uninstalled multidict-6.0.5\n","  Attempting uninstall: jsonpointer\n","    Found existing installation: jsonpointer 3.0.0\n","    Uninstalling jsonpointer-3.0.0:\n","      Successfully uninstalled jsonpointer-3.0.0\n","  Attempting uninstall: idna\n","    Found existing installation: idna 3.7\n","    Uninstalling idna-3.7:\n","      Successfully uninstalled idna-3.7\n","  Attempting uninstall: greenlet\n","    Found existing installation: greenlet 3.0.3\n","    Uninstalling greenlet-3.0.3:\n","      Successfully uninstalled greenlet-3.0.3\n","  Attempting uninstall: frozenlist\n","    Found existing installation: frozenlist 1.4.1\n","    Uninstalling frozenlist-1.4.1:\n","      Successfully uninstalled frozenlist-1.4.1\n","  Attempting uninstall: charset-normalizer\n","    Found existing installation: charset-normalizer 3.3.2\n","    Uninstalling charset-normalizer-3.3.2:\n","      Successfully uninstalled charset-normalizer-3.3.2\n","  Attempting uninstall: certifi\n","    Found existing installation: certifi 2024.7.4\n","    Uninstalling certifi-2024.7.4:\n","      Successfully uninstalled certifi-2024.7.4\n","  Attempting uninstall: attrs\n","    Found existing installation: attrs 24.2.0\n","    Uninstalling attrs-24.2.0:\n","      Successfully uninstalled attrs-24.2.0\n","  Attempting uninstall: async-timeout\n","    Found existing installation: async-timeout 4.0.3\n","    Uninstalling async-timeout-4.0.3:\n","      Successfully uninstalled async-timeout-4.0.3\n","  Attempting uninstall: annotated-types\n","    Found existing installation: annotated-types 0.7.0\n","    Uninstalling annotated-types-0.7.0:\n","      Successfully uninstalled annotated-types-0.7.0\n","  Attempting uninstall: aiohappyeyeballs\n","    Found existing installation: aiohappyeyeballs 2.3.4\n","    Uninstalling aiohappyeyeballs-2.3.4:\n","      Successfully uninstalled aiohappyeyeballs-2.3.4\n","  Attempting uninstall: yarl\n","    Found existing installation: yarl 1.9.4\n","    Uninstalling yarl-1.9.4:\n","      Successfully uninstalled yarl-1.9.4\n","  Attempting uninstall: SQLAlchemy\n","    Found existing installation: SQLAlchemy 2.0.32\n","    Uninstalling SQLAlchemy-2.0.32:\n","      Successfully uninstalled SQLAlchemy-2.0.32\n","  Attempting uninstall: requests\n","    Found existing installation: requests 2.32.3\n","    Uninstalling requests-2.32.3:\n","      Successfully uninstalled requests-2.32.3\n","  Attempting uninstall: pydantic-core\n","    Found existing installation: pydantic_core 2.20.1\n","    Uninstalling pydantic_core-2.20.1:\n","      Successfully uninstalled pydantic_core-2.20.1\n","  Attempting uninstall: jsonpatch\n","    Found existing installation: jsonpatch 1.33\n","    Uninstalling jsonpatch-1.33:\n","      Successfully uninstalled jsonpatch-1.33\n","  Attempting uninstall: aiosignal\n","    Found existing installation: aiosignal 1.3.1\n","    Uninstalling aiosignal-1.3.1:\n","      Successfully uninstalled aiosignal-1.3.1\n","  Attempting uninstall: pydantic\n","    Found existing installation: pydantic 2.8.2\n","    Uninstalling pydantic-2.8.2:\n","      Successfully uninstalled pydantic-2.8.2\n","  Attempting uninstall: aiohttp\n","    Found existing installation: aiohttp 3.10.1\n","    Uninstalling aiohttp-3.10.1:\n","      Successfully uninstalled aiohttp-3.10.1\n","  Attempting uninstall: langsmith\n","    Found existing installation: langsmith 0.1.98\n","    Uninstalling langsmith-0.1.98:\n","      Successfully uninstalled langsmith-0.1.98\n","  Attempting uninstall: langchain-core\n","    Found existing installation: langchain-core 0.2.28\n","    Uninstalling langchain-core-0.2.28:\n","      Successfully uninstalled langchain-core-0.2.28\n","  Attempting uninstall: langchain-text-splitters\n","    Found existing installation: langchain-text-splitters 0.2.2\n","    Uninstalling langchain-text-splitters-0.2.2:\n","      Successfully uninstalled langchain-text-splitters-0.2.2\n","  Attempting uninstall: langchain\n","    Found existing installation: langchain 0.2.12\n","    Uninstalling langchain-0.2.12:\n","      Successfully uninstalled langchain-0.2.12\n","\u001b[31mERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.\n","google-colab 1.0.0 requires requests==2.31.0, but you have requests 2.32.3 which is incompatible.\u001b[0m\u001b[31m\n","\u001b[0mSuccessfully installed PyYAML-6.0.1 SQLAlchemy-2.0.32 aiohappyeyeballs-2.3.4 aiohttp-3.10.1 aiosignal-1.3.1 annotated-types-0.7.0 async-timeout-4.0.3 attrs-24.2.0 certifi-2024.7.4 charset-normalizer-3.3.2 frozenlist-1.4.1 greenlet-3.0.3 idna-3.7 jsonpatch-1.33 jsonpointer-3.0.0 langchain-0.2.12 langchain-core-0.2.28 langchain-text-splitters-0.2.2 langsmith-0.1.98 multidict-6.0.5 numpy-1.26.4 orjson-3.10.6 packaging-24.1 pydantic-2.8.2 pydantic-core-2.20.1 requests-2.32.3 tenacity-8.5.0 typing-extensions-4.12.2 urllib3-2.2.2 yarl-1.9.4\n"]},{"output_type":"display_data","data":{"application/vnd.colab-display-data+json":{"pip_warning":{"packages":["certifi"]},"id":"c51573841be349488b2d8d6a7b696d62"}},"metadata":{}},{"output_type":"stream","name":"stdout","text":["Collecting pypdf\n","  Downloading pypdf-4.3.1-py3-none-any.whl.metadata (7.4 kB)\n","Collecting typing_extensions>=4.0 (from pypdf)\n","  Downloading typing_extensions-4.12.2-py3-none-any.whl.metadata (3.0 kB)\n","Downloading pypdf-4.3.1-py3-none-any.whl (295 kB)\n","\u001b[?25l   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m0.0/295.8 kB\u001b[0m \u001b[31m?\u001b[0m eta \u001b[36m-:--:--\u001b[0m\r\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m295.8/295.8 kB\u001b[0m \u001b[31m17.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading typing_extensions-4.12.2-py3-none-any.whl (37 kB)\n","Installing collected packages: typing_extensions, pypdf\n","  Attempting uninstall: typing_extensions\n","    Found existing installation: typing_extensions 4.12.2\n","    Uninstalling typing_extensions-4.12.2:\n","      Successfully uninstalled typing_extensions-4.12.2\n","  Attempting uninstall: pypdf\n","    Found existing installation: pypdf 4.3.1\n","    Uninstalling pypdf-4.3.1:\n","      Successfully uninstalled pypdf-4.3.1\n","Successfully installed pypdf-4.3.1 typing_extensions-4.12.2\n","Collecting langchain-community\n","  Downloading langchain_community-0.2.11-py3-none-any.whl.metadata (2.7 kB)\n","Collecting PyYAML>=5.3 (from langchain-community)\n","  Downloading PyYAML-6.0.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.1 kB)\n","Collecting SQLAlchemy<3,>=1.4 (from langchain-community)\n","  Downloading SQLAlchemy-2.0.32-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.6 kB)\n","Collecting aiohttp<4.0.0,>=3.8.3 (from langchain-community)\n","  Downloading aiohttp-3.10.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (7.5 kB)\n","Collecting dataclasses-json<0.7,>=0.5.7 (from langchain-community)\n","  Downloading dataclasses_json-0.6.7-py3-none-any.whl.metadata (25 kB)\n","Collecting langchain<0.3.0,>=0.2.12 (from langchain-community)\n","  Downloading langchain-0.2.12-py3-none-any.whl.metadata (7.1 kB)\n","Collecting langchain-core<0.3.0,>=0.2.27 (from langchain-community)\n","  Downloading langchain_core-0.2.28-py3-none-any.whl.metadata (6.2 kB)\n","Collecting langsmith<0.2.0,>=0.1.0 (from langchain-community)\n","  Downloading langsmith-0.1.98-py3-none-any.whl.metadata (13 kB)\n","Collecting numpy<2,>=1 (from langchain-community)\n","  Downloading numpy-1.26.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (61 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m61.0/61.0 kB\u001b[0m \u001b[31m207.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting requests<3,>=2 (from langchain-community)\n","  Downloading requests-2.32.3-py3-none-any.whl.metadata (4.6 kB)\n","Collecting tenacity!=8.4.0,<9.0.0,>=8.1.0 (from langchain-community)\n","  Downloading tenacity-8.5.0-py3-none-any.whl.metadata (1.2 kB)\n","Collecting aiohappyeyeballs>=2.3.0 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Downloading aiohappyeyeballs-2.3.4-py3-none-any.whl.metadata (5.6 kB)\n","Collecting aiosignal>=1.1.2 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Downloading aiosignal-1.3.1-py3-none-any.whl.metadata (4.0 kB)\n","Collecting attrs>=17.3.0 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Downloading attrs-24.2.0-py3-none-any.whl.metadata (11 kB)\n","Collecting frozenlist>=1.1.1 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Downloading frozenlist-1.4.1-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (12 kB)\n","Collecting multidict<7.0,>=4.5 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Downloading multidict-6.0.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.2 kB)\n","Collecting yarl<2.0,>=1.0 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Downloading yarl-1.9.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (31 kB)\n","Collecting async-timeout<5.0,>=4.0 (from aiohttp<4.0.0,>=3.8.3->langchain-community)\n","  Downloading async_timeout-4.0.3-py3-none-any.whl.metadata (4.2 kB)\n","Collecting marshmallow<4.0.0,>=3.18.0 (from dataclasses-json<0.7,>=0.5.7->langchain-community)\n","  Downloading marshmallow-3.21.3-py3-none-any.whl.metadata (7.1 kB)\n","Collecting typing-inspect<1,>=0.4.0 (from dataclasses-json<0.7,>=0.5.7->langchain-community)\n","  Downloading typing_inspect-0.9.0-py3-none-any.whl.metadata (1.5 kB)\n","Collecting langchain-text-splitters<0.3.0,>=0.2.0 (from langchain<0.3.0,>=0.2.12->langchain-community)\n","  Downloading langchain_text_splitters-0.2.2-py3-none-any.whl.metadata (2.1 kB)\n","Collecting pydantic<3,>=1 (from langchain<0.3.0,>=0.2.12->langchain-community)\n","  Downloading pydantic-2.8.2-py3-none-any.whl.metadata (125 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m125.2/125.2 kB\u001b[0m \u001b[31m242.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting jsonpatch<2.0,>=1.33 (from langchain-core<0.3.0,>=0.2.27->langchain-community)\n","  Downloading jsonpatch-1.33-py2.py3-none-any.whl.metadata (3.0 kB)\n","Collecting packaging<25,>=23.2 (from langchain-core<0.3.0,>=0.2.27->langchain-community)\n","  Downloading packaging-24.1-py3-none-any.whl.metadata (3.2 kB)\n","Collecting typing-extensions>=4.7 (from langchain-core<0.3.0,>=0.2.27->langchain-community)\n","  Downloading typing_extensions-4.12.2-py3-none-any.whl.metadata (3.0 kB)\n","Collecting orjson<4.0.0,>=3.9.14 (from langsmith<0.2.0,>=0.1.0->langchain-community)\n","  Downloading orjson-3.10.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (50 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m50.4/50.4 kB\u001b[0m \u001b[31m132.2 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting charset-normalizer<4,>=2 (from requests<3,>=2->langchain-community)\n","  Downloading charset_normalizer-3.3.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (33 kB)\n","Collecting idna<4,>=2.5 (from requests<3,>=2->langchain-community)\n","  Downloading idna-3.7-py3-none-any.whl.metadata (9.9 kB)\n","Collecting urllib3<3,>=1.21.1 (from requests<3,>=2->langchain-community)\n","  Downloading urllib3-2.2.2-py3-none-any.whl.metadata (6.4 kB)\n","Collecting certifi>=2017.4.17 (from requests<3,>=2->langchain-community)\n","  Downloading certifi-2024.7.4-py3-none-any.whl.metadata (2.2 kB)\n","Collecting greenlet!=0.4.17 (from SQLAlchemy<3,>=1.4->langchain-community)\n","  Downloading greenlet-3.0.3-cp310-cp310-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl.metadata (3.8 kB)\n","Collecting jsonpointer>=1.9 (from jsonpatch<2.0,>=1.33->langchain-core<0.3.0,>=0.2.27->langchain-community)\n","  Downloading jsonpointer-3.0.0-py2.py3-none-any.whl.metadata (2.3 kB)\n","Collecting annotated-types>=0.4.0 (from pydantic<3,>=1->langchain<0.3.0,>=0.2.12->langchain-community)\n","  Downloading annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)\n","Collecting pydantic-core==2.20.1 (from pydantic<3,>=1->langchain<0.3.0,>=0.2.12->langchain-community)\n","  Downloading pydantic_core-2.20.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.6 kB)\n","Collecting mypy-extensions>=0.3.0 (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain-community)\n","  Downloading mypy_extensions-1.0.0-py3-none-any.whl.metadata (1.1 kB)\n","Downloading langchain_community-0.2.11-py3-none-any.whl (2.3 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m2.3/2.3 MB\u001b[0m \u001b[31m96.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading aiohttp-3.10.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.2 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m1.2/1.2 MB\u001b[0m \u001b[31m172.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading dataclasses_json-0.6.7-py3-none-any.whl (28 kB)\n","Downloading langchain-0.2.12-py3-none-any.whl (990 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m990.6/990.6 kB\u001b[0m \u001b[31m52.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading langchain_core-0.2.28-py3-none-any.whl (379 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m379.9/379.9 kB\u001b[0m \u001b[31m182.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading langsmith-0.1.98-py3-none-any.whl (140 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m140.2/140.2 kB\u001b[0m \u001b[31m167.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading numpy-1.26.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (18.2 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m18.2/18.2 MB\u001b[0m \u001b[31m148.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading PyYAML-6.0.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (705 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m705.5/705.5 kB\u001b[0m \u001b[31m200.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading requests-2.32.3-py3-none-any.whl (64 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m64.9/64.9 kB\u001b[0m \u001b[31m147.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading SQLAlchemy-2.0.32-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.1 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m3.1/3.1 MB\u001b[0m \u001b[31m185.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading tenacity-8.5.0-py3-none-any.whl (28 kB)\n","Downloading aiohappyeyeballs-2.3.4-py3-none-any.whl (12 kB)\n","Downloading aiosignal-1.3.1-py3-none-any.whl (7.6 kB)\n","Downloading async_timeout-4.0.3-py3-none-any.whl (5.7 kB)\n","Downloading attrs-24.2.0-py3-none-any.whl (63 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m63.0/63.0 kB\u001b[0m \u001b[31m131.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading certifi-2024.7.4-py3-none-any.whl (162 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m163.0/163.0 kB\u001b[0m \u001b[31m160.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading charset_normalizer-3.3.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (142 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m142.1/142.1 kB\u001b[0m \u001b[31m180.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading frozenlist-1.4.1-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (239 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m239.5/239.5 kB\u001b[0m \u001b[31m197.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading greenlet-3.0.3-cp310-cp310-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl (616 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m616.0/616.0 kB\u001b[0m \u001b[31m206.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading idna-3.7-py3-none-any.whl (66 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m66.8/66.8 kB\u001b[0m \u001b[31m158.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading jsonpatch-1.33-py2.py3-none-any.whl (12 kB)\n","Downloading langchain_text_splitters-0.2.2-py3-none-any.whl (25 kB)\n","Downloading marshmallow-3.21.3-py3-none-any.whl (49 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m49.2/49.2 kB\u001b[0m \u001b[31m131.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading multidict-6.0.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (124 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m124.3/124.3 kB\u001b[0m \u001b[31m174.2 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading orjson-3.10.6-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (141 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m141.1/141.1 kB\u001b[0m \u001b[31m188.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading packaging-24.1-py3-none-any.whl (53 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m54.0/54.0 kB\u001b[0m \u001b[31m152.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading pydantic-2.8.2-py3-none-any.whl (423 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m423.9/423.9 kB\u001b[0m \u001b[31m206.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading pydantic_core-2.20.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m2.1/2.1 MB\u001b[0m \u001b[31m191.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading typing_extensions-4.12.2-py3-none-any.whl (37 kB)\n","Downloading typing_inspect-0.9.0-py3-none-any.whl (8.8 kB)\n","Downloading urllib3-2.2.2-py3-none-any.whl (121 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m121.4/121.4 kB\u001b[0m \u001b[31m180.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading yarl-1.9.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (301 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m301.6/301.6 kB\u001b[0m \u001b[31m195.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hDownloading annotated_types-0.7.0-py3-none-any.whl (13 kB)\n","Downloading jsonpointer-3.0.0-py2.py3-none-any.whl (7.6 kB)\n","Downloading mypy_extensions-1.0.0-py3-none-any.whl (4.7 kB)\n","Installing collected packages: urllib3, typing-extensions, tenacity, PyYAML, packaging, orjson, numpy, mypy-extensions, multidict, jsonpointer, idna, greenlet, frozenlist, charset-normalizer, certifi, attrs, async-timeout, annotated-types, aiohappyeyeballs, yarl, typing-inspect, SQLAlchemy, requests, pydantic-core, marshmallow, jsonpatch, aiosignal, pydantic, dataclasses-json, aiohttp, langsmith, langchain-core, langchain-text-splitters, langchain, langchain-community\n","  Attempting uninstall: urllib3\n","    Found existing installation: urllib3 2.2.2\n","    Uninstalling urllib3-2.2.2:\n","      Successfully uninstalled urllib3-2.2.2\n","  Attempting uninstall: typing-extensions\n","    Found existing installation: typing_extensions 4.12.2\n","    Uninstalling typing_extensions-4.12.2:\n","      Successfully uninstalled typing_extensions-4.12.2\n","  Attempting uninstall: tenacity\n","    Found existing installation: tenacity 8.5.0\n","    Uninstalling tenacity-8.5.0:\n","      Successfully uninstalled tenacity-8.5.0\n","  Attempting uninstall: PyYAML\n","    Found existing installation: PyYAML 6.0.1\n","    Uninstalling PyYAML-6.0.1:\n","      Successfully uninstalled PyYAML-6.0.1\n","  Attempting uninstall: packaging\n","    Found existing installation: packaging 24.1\n","    Uninstalling packaging-24.1:\n","      Successfully uninstalled packaging-24.1\n","  Attempting uninstall: orjson\n","    Found existing installation: orjson 3.10.6\n","    Uninstalling orjson-3.10.6:\n","      Successfully uninstalled orjson-3.10.6\n","  Attempting uninstall: numpy\n","    Found existing installation: numpy 1.26.4\n","    Uninstalling numpy-1.26.4:\n","      Successfully uninstalled numpy-1.26.4\n","  Attempting uninstall: mypy-extensions\n","    Found existing installation: mypy-extensions 1.0.0\n","    Uninstalling mypy-extensions-1.0.0:\n","      Successfully uninstalled mypy-extensions-1.0.0\n","  Attempting uninstall: multidict\n","    Found existing installation: multidict 6.0.5\n","    Uninstalling multidict-6.0.5:\n","      Successfully uninstalled multidict-6.0.5\n","  Attempting uninstall: jsonpointer\n","    Found existing installation: jsonpointer 3.0.0\n","    Uninstalling jsonpointer-3.0.0:\n","      Successfully uninstalled jsonpointer-3.0.0\n","  Attempting uninstall: idna\n","    Found existing installation: idna 3.7\n","    Uninstalling idna-3.7:\n","      Successfully uninstalled idna-3.7\n","  Attempting uninstall: greenlet\n","    Found existing installation: greenlet 3.0.3\n","    Uninstalling greenlet-3.0.3:\n","      Successfully uninstalled greenlet-3.0.3\n","  Attempting uninstall: frozenlist\n","    Found existing installation: frozenlist 1.4.1\n","    Uninstalling frozenlist-1.4.1:\n","      Successfully uninstalled frozenlist-1.4.1\n","  Attempting uninstall: charset-normalizer\n","    Found existing installation: charset-normalizer 3.3.2\n","    Uninstalling charset-normalizer-3.3.2:\n","      Successfully uninstalled charset-normalizer-3.3.2\n","  Attempting uninstall: certifi\n","    Found existing installation: certifi 2024.7.4\n","    Uninstalling certifi-2024.7.4:\n","      Successfully uninstalled certifi-2024.7.4\n","  Attempting uninstall: attrs\n","    Found existing installation: attrs 24.2.0\n","    Uninstalling attrs-24.2.0:\n","      Successfully uninstalled attrs-24.2.0\n","  Attempting uninstall: async-timeout\n","    Found existing installation: async-timeout 4.0.3\n","    Uninstalling async-timeout-4.0.3:\n","      Successfully uninstalled async-timeout-4.0.3\n","  Attempting uninstall: annotated-types\n","    Found existing installation: annotated-types 0.7.0\n","    Uninstalling annotated-types-0.7.0:\n","      Successfully uninstalled annotated-types-0.7.0\n","  Attempting uninstall: aiohappyeyeballs\n","    Found existing installation: aiohappyeyeballs 2.3.4\n","    Uninstalling aiohappyeyeballs-2.3.4:\n","      Successfully uninstalled aiohappyeyeballs-2.3.4\n","  Attempting uninstall: yarl\n","    Found existing installation: yarl 1.9.4\n","    Uninstalling yarl-1.9.4:\n","      Successfully uninstalled yarl-1.9.4\n","  Attempting uninstall: typing-inspect\n","    Found existing installation: typing-inspect 0.9.0\n","    Uninstalling typing-inspect-0.9.0:\n","      Successfully uninstalled typing-inspect-0.9.0\n","  Attempting uninstall: SQLAlchemy\n","    Found existing installation: SQLAlchemy 2.0.32\n","    Uninstalling SQLAlchemy-2.0.32:\n","      Successfully uninstalled SQLAlchemy-2.0.32\n","  Attempting uninstall: requests\n","    Found existing installation: requests 2.32.3\n","    Uninstalling requests-2.32.3:\n","      Successfully uninstalled requests-2.32.3\n","  Attempting uninstall: pydantic-core\n","    Found existing installation: pydantic_core 2.20.1\n","    Uninstalling pydantic_core-2.20.1:\n","      Successfully uninstalled pydantic_core-2.20.1\n","  Attempting uninstall: marshmallow\n","    Found existing installation: marshmallow 3.21.3\n","    Uninstalling marshmallow-3.21.3:\n","      Successfully uninstalled marshmallow-3.21.3\n","  Attempting uninstall: jsonpatch\n","    Found existing installation: jsonpatch 1.33\n","    Uninstalling jsonpatch-1.33:\n","      Successfully uninstalled jsonpatch-1.33\n","  Attempting uninstall: aiosignal\n","    Found existing installation: aiosignal 1.3.1\n","    Uninstalling aiosignal-1.3.1:\n","      Successfully uninstalled aiosignal-1.3.1\n","  Attempting uninstall: pydantic\n","    Found existing installation: pydantic 2.8.2\n","    Uninstalling pydantic-2.8.2:\n","      Successfully uninstalled pydantic-2.8.2\n","  Attempting uninstall: dataclasses-json\n","    Found existing installation: dataclasses-json 0.6.7\n","    Uninstalling dataclasses-json-0.6.7:\n","      Successfully uninstalled dataclasses-json-0.6.7\n","  Attempting uninstall: aiohttp\n","    Found existing installation: aiohttp 3.10.1\n","    Uninstalling aiohttp-3.10.1:\n","      Successfully uninstalled aiohttp-3.10.1\n","  Attempting uninstall: langsmith\n","    Found existing installation: langsmith 0.1.98\n","    Uninstalling langsmith-0.1.98:\n","      Successfully uninstalled langsmith-0.1.98\n","  Attempting uninstall: langchain-core\n","    Found existing installation: langchain-core 0.2.28\n","    Uninstalling langchain-core-0.2.28:\n","      Successfully uninstalled langchain-core-0.2.28\n","  Attempting uninstall: langchain-text-splitters\n","    Found existing installation: langchain-text-splitters 0.2.2\n","    Uninstalling langchain-text-splitters-0.2.2:\n","      Successfully uninstalled langchain-text-splitters-0.2.2\n","  Attempting uninstall: langchain\n","    Found existing installation: langchain 0.2.12\n","    Uninstalling langchain-0.2.12:\n","      Successfully uninstalled langchain-0.2.12\n","  Attempting uninstall: langchain-community\n","    Found existing installation: langchain-community 0.2.11\n","    Uninstalling langchain-community-0.2.11:\n","      Successfully uninstalled langchain-community-0.2.11\n","\u001b[31mERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.\n","google-colab 1.0.0 requires requests==2.31.0, but you have requests 2.32.3 which is incompatible.\u001b[0m\u001b[31m\n","\u001b[0mSuccessfully installed PyYAML-6.0.1 SQLAlchemy-2.0.32 aiohappyeyeballs-2.3.4 aiohttp-3.10.1 aiosignal-1.3.1 annotated-types-0.7.0 async-timeout-4.0.3 attrs-24.2.0 certifi-2024.7.4 charset-normalizer-3.3.2 dataclasses-json-0.6.7 frozenlist-1.4.1 greenlet-3.0.3 idna-3.7 jsonpatch-1.33 jsonpointer-3.0.0 langchain-0.2.12 langchain-community-0.2.11 langchain-core-0.2.28 langchain-text-splitters-0.2.2 langsmith-0.1.98 marshmallow-3.21.3 multidict-6.0.5 mypy-extensions-1.0.0 numpy-1.26.4 orjson-3.10.6 packaging-24.1 pydantic-2.8.2 pydantic-core-2.20.1 requests-2.32.3 tenacity-8.5.0 typing-extensions-4.12.2 typing-inspect-0.9.0 urllib3-2.2.2 yarl-1.9.4\n"]},{"output_type":"display_data","data":{"application/vnd.colab-display-data+json":{"pip_warning":{"packages":["certifi"]},"id":"c8a782abb4e641fdbf6e8b5d934f59c5"}},"metadata":{}}]},{"cell_type":"code","source":["import os\n","import openai\n","import tiktoken\n","\n","# Mount Google Drive\n","from google.colab import drive\n","drive.mount('/content/drive')\n","\n","# Path to the file containing the API key\n","key_file_path = '/content/drive/MyDrive/Confidential/Keys/openai.key'\n","\n","# Read the API key from the file\n","with open(key_file_path, 'r') as file:\n","    api_key = file.read().strip()"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"RRaaAlEDOqHU","executionInfo":{"status":"ok","timestamp":1722973678648,"user_tz":-330,"elapsed":4896,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"bd70edf6-c541-4d5b-e2df-bed6649daba8"},"execution_count":3,"outputs":[{"output_type":"stream","name":"stdout","text":["Drive already mounted at /content/drive; to attempt to forcibly remount, call drive.mount(\"/content/drive\", force_remount=True).\n"]}]},{"cell_type":"code","source":["\n","# account for deprecation of LLM model\n","import datetime\n","# Get the current date\n","current_date = datetime.datetime.now().date()\n","\n","# Define the date after which the model should be set to \"gpt-3.5-turbo\"\n","target_date = datetime.date(2024, 6, 12)\n","\n","# Set the model variable based on the current date\n","if current_date > target_date:\n","    llm_model = \"gpt-3.5-turbo\"\n","else:\n","    llm_model = \"gpt-3.5-turbo-0301\"\n","\n","def get_completion(prompt, model=llm_model,temperature=0):\n","    messages = [{\"role\": \"user\", \"content\": prompt}]\n","    response = client.chat.completions.create(\n","        model=model,\n","        messages=messages,\n","        temperature=temperature\n","    )\n","    return response.choices[0].message.content\n","\n","def get_completion_from_messages(messages, model=\"gpt-3.5-turbo\", temperature=0):\n","    response = client.chat.completions.create(\n","        model=model,\n","        messages=messages,\n","        temperature=temperature, # this is the degree of randomness of the model's output\n","    )\n","#     print(str(response.choices[0].message))\n","    return response.choices[0].message.content\n"],"metadata":{"id":"GuDKhDYuPGKJ","executionInfo":{"status":"ok","timestamp":1722973765333,"user_tz":-330,"elapsed":5,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":25,"outputs":[]},{"cell_type":"code","source":["from langchain.vectorstores import Chroma\n","from langchain.embeddings.openai import OpenAIEmbeddings\n","persist_directory = '/content/drive/MyDrive/PwC/Colab Notebooks/Files/docs/chroma2'\n","embedding = OpenAIEmbeddings(openai_api_key=api_key)\n","vectordb = Chroma(persist_directory=persist_directory, embedding_function=embedding)"],"metadata":{"id":"QwjpiC7b-lW4","executionInfo":{"status":"ok","timestamp":1722974526798,"user_tz":-330,"elapsed":641,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":57,"outputs":[]},{"cell_type":"code","source":["print(vectordb._collection.count())"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"Mz4B48VjG_4G","executionInfo":{"status":"ok","timestamp":1722974527560,"user_tz":-330,"elapsed":1,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"9f4e5212-9bbb-4f99-9df4-874b31d5efbf"},"execution_count":58,"outputs":[{"output_type":"stream","name":"stdout","text":["817\n"]}]},{"cell_type":"code","source":["question = \"What are major topics for this class?\"\n","docs = vectordb.similarity_search(question,k=3)\n","len(docs)\n"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"mJaWB9XoHDct","executionInfo":{"status":"ok","timestamp":1722974528749,"user_tz":-330,"elapsed":1190,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"5ca52de9-bd8b-467b-9578-31eb316c36d9"},"execution_count":59,"outputs":[{"output_type":"execute_result","data":{"text/plain":["3"]},"metadata":{},"execution_count":59}]},{"cell_type":"markdown","source":["### RetrievalQA Chain"],"metadata":{"id":"60psV2Q9HJxQ"}},{"cell_type":"code","source":["from langchain.chains import RetrievalQA"],"metadata":{"id":"dzeslhIqHG1N","executionInfo":{"status":"ok","timestamp":1722974528749,"user_tz":-330,"elapsed":2,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":60,"outputs":[]},{"cell_type":"code","source":["from langchain.chat_models import ChatOpenAI\n","\n","llm = ChatOpenAI(model_name=llm_model, temperature=0,openai_api_key=api_key)"],"metadata":{"id":"uDDBjXnuPdxM","executionInfo":{"status":"ok","timestamp":1722974529243,"user_tz":-330,"elapsed":496,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":61,"outputs":[]},{"cell_type":"code","source":["qa_chain = RetrievalQA.from_chain_type(\n","    llm,\n","    retriever=vectordb.as_retriever()\n",")"],"metadata":{"id":"-uGA_Y81HM3X","executionInfo":{"status":"ok","timestamp":1722974529243,"user_tz":-330,"elapsed":1,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":62,"outputs":[]},{"cell_type":"code","source":["result = qa_chain({\"query\": question})"],"metadata":{"id":"X68UHsb4HOIX","executionInfo":{"status":"ok","timestamp":1722974531226,"user_tz":-330,"elapsed":1984,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":63,"outputs":[]},{"cell_type":"code","source":["result[\"result\"]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":70},"id":"W2RO8HI6HPdm","executionInfo":{"status":"ok","timestamp":1722974531227,"user_tz":-330,"elapsed":4,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"93243bf7-582d-4dae-afba-b905020556ba"},"execution_count":64,"outputs":[{"output_type":"execute_result","data":{"text/plain":["'The major topics covered in this class include:\\n1. Linear regression\\n2. Logistic regression\\n3. Generalized linear models\\n4. Generative learning algorithms\\n5. Overfitting\\n6. Regularization\\n7. Cross-validation\\n8. Bias-variance trade-off\\n\\nThese topics cover supervised learning, classification, and regression techniques in machine learning.'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":64}]},{"cell_type":"markdown","source":["### Prompt"],"metadata":{"id":"lb9sIE_yHRkQ"}},{"cell_type":"code","source":["from langchain.prompts import PromptTemplate\n","\n","# Build prompt\n","template = \"\"\"Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer. Use three sentences maximum. Keep the answer as concise as possible. Always say \"thanks for asking!\" at the end of the answer.\n","{context}\n","Question: {question}\n","Helpful Answer:\"\"\"\n","QA_CHAIN_PROMPT = PromptTemplate.from_template(template)"],"metadata":{"id":"rsKoBxqUHQpI","executionInfo":{"status":"ok","timestamp":1722974531227,"user_tz":-330,"elapsed":3,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":65,"outputs":[]},{"cell_type":"code","source":["# Run chain\n","qa_chain = RetrievalQA.from_chain_type(\n","    llm,\n","    retriever=vectordb.as_retriever(),\n","    return_source_documents=True,\n","    chain_type_kwargs={\"prompt\": QA_CHAIN_PROMPT}\n",")\n"],"metadata":{"id":"sgChi8GhHUQ7","executionInfo":{"status":"ok","timestamp":1722974531227,"user_tz":-330,"elapsed":3,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":66,"outputs":[]},{"cell_type":"code","source":["question = \"Is probability a class topic?\""],"metadata":{"id":"Eq2bqe2cHXFr","executionInfo":{"status":"ok","timestamp":1722974531227,"user_tz":-330,"elapsed":3,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":67,"outputs":[]},{"cell_type":"code","source":["result = qa_chain({\"query\": question})"],"metadata":{"id":"9diH0j_8HXaR","executionInfo":{"status":"ok","timestamp":1722974532410,"user_tz":-330,"elapsed":1186,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":68,"outputs":[]},{"cell_type":"code","source":["result"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"sD-CJEd_HeZw","executionInfo":{"status":"ok","timestamp":1722974532410,"user_tz":-330,"elapsed":4,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"0d5b756e-ade4-40bf-d0e0-16d0ce7f7162"},"execution_count":69,"outputs":[{"output_type":"execute_result","data":{"text/plain":["{'query': 'Is probability a class topic?',\n"," 'result': \"I don't know. Thanks for asking!\",\n"," 'source_documents': [Document(metadata={'page': 127, 'source': 'https://cs229.stanford.edu/main_notes.pdf'}, page_content='127\\ntimes and calculate the fraction of times that it came up heads, that will be\\na good estimate of φwith high probability (if nis large).\\nUsing just these two lemmas, we will be able to prove some of the deepest\\nand most important results in learning theory.\\nTo simplify our exposition, let’s restrict our attention to binary classiﬁca-\\ntion in which the labels are y∈{0,1}. Everything we’ll say here generalizes\\nto other problems, including regression and multi-class classiﬁcation.\\nWe assume we are given a training set S={(x(i),y(i));i= 1,...,n}of size\\nn, where the training examples ( x(i),y(i)) are drawn iid from some probability\\ndistributionD. For a hypothesis h, we deﬁne the training error (also called\\ntheempirical risk orempirical error in learning theory) to be\\nˆε(h) =1\\nnn∑\\ni=11{h(x(i))̸=y(i)}.\\nThis is just the fraction of training examples that hmisclassiﬁes. When we\\nwant to make explicit the dependence of ˆ ε(h) on the training set S, we may\\nalso write this a ˆ εS(h). We also deﬁne the generalization error to be\\nε(h) =P(x,y)∼D(h(x)̸=y).\\nI.e. this is the probability that, if we now draw a new example ( x,y) from\\nthe distributionD,hwill misclassify it.\\nNote that we have assumed that the training data was drawn from the\\nsame distributionDwith which we’re going to evaluate our hypotheses (in\\nthe deﬁnition of generalization error). This is sometimes also referred to as\\none of the PAC assumptions.9\\nConsider the setting of linear classiﬁcation, and let hθ(x) = 1{θTx≥0}.'),\n","  Document(metadata={'page': 127, 'source': 'https://cs229.stanford.edu/main_notes.pdf'}, page_content='127\\ntimes and calculate the fraction of times that it came up heads, that will be\\na good estimate of φwith high probability (if nis large).\\nUsing just these two lemmas, we will be able to prove some of the deepest\\nand most important results in learning theory.\\nTo simplify our exposition, let’s restrict our attention to binary classiﬁca-\\ntion in which the labels are y∈{0,1}. Everything we’ll say here generalizes\\nto other problems, including regression and multi-class classiﬁcation.\\nWe assume we are given a training set S={(x(i),y(i));i= 1,...,n}of size\\nn, where the training examples ( x(i),y(i)) are drawn iid from some probability\\ndistributionD. For a hypothesis h, we deﬁne the training error (also called\\ntheempirical risk orempirical error in learning theory) to be\\nˆε(h) =1\\nnn∑\\ni=11{h(x(i))̸=y(i)}.\\nThis is just the fraction of training examples that hmisclassiﬁes. When we\\nwant to make explicit the dependence of ˆ ε(h) on the training set S, we may\\nalso write this a ˆ εS(h). We also deﬁne the generalization error to be\\nε(h) =P(x,y)∼D(h(x)̸=y).\\nI.e. this is the probability that, if we now draw a new example ( x,y) from\\nthe distributionD,hwill misclassify it.\\nNote that we have assumed that the training data was drawn from the\\nsame distributionDwith which we’re going to evaluate our hypotheses (in\\nthe deﬁnition of generalization error). This is sometimes also referred to as\\none of the PAC assumptions.9\\nConsider the setting of linear classiﬁcation, and let hθ(x) = 1{θTx≥0}.'),\n","  Document(metadata={'page': 20, 'source': 'https://cs229.stanford.edu/main_notes.pdf'}, page_content='Chapter 2\\nClassiﬁcation and logistic\\nregression\\nLet’s now talk about the classiﬁcation problem. This is just like the regression\\nproblem, except that the values ywe now want to predict take on only\\na small number of discrete values. For now, we will focus on the binary\\nclassiﬁcation problem in which ycan take on only two values, 0 and 1.\\n(Most of what we say here will also generalize to the multiple-class case.)\\nFor instance, if we are trying to build a spam classiﬁer for email, then x(i)\\nmay be some features of a piece of email, and ymay be 1 if it is a piece\\nof spam mail, and 0 otherwise. 0 is also called the negative class , and 1\\nthepositive class , and they are sometimes also denoted by the symbols “-”\\nand “+.” Given x(i), the corresponding y(i)is also called the label for the\\ntraining example.\\n2.1 Logistic regression\\nWe could approach the classiﬁcation problem ignoring the fact that yis\\ndiscrete-valued, and use our old linear regression algorithm to try to predict\\nygivenx. However, it is easy to construct examples where this method\\nperforms very poorly. Intuitively, it also doesn’t make sense for hθ(x) to take\\nvalues larger than 1 or smaller than 0 when we know that y∈{0,1}.\\nTo ﬁx this, let’s change the form for our hypotheses hθ(x). We will choose\\nhθ(x) =g(θTx) =1\\n1 +e−θTx,\\nwhere\\ng(z) =1\\n1 +e−z\\n20'),\n","  Document(metadata={'page': 20, 'source': 'https://cs229.stanford.edu/main_notes.pdf'}, page_content='Chapter 2\\nClassiﬁcation and logistic\\nregression\\nLet’s now talk about the classiﬁcation problem. This is just like the regression\\nproblem, except that the values ywe now want to predict take on only\\na small number of discrete values. For now, we will focus on the binary\\nclassiﬁcation problem in which ycan take on only two values, 0 and 1.\\n(Most of what we say here will also generalize to the multiple-class case.)\\nFor instance, if we are trying to build a spam classiﬁer for email, then x(i)\\nmay be some features of a piece of email, and ymay be 1 if it is a piece\\nof spam mail, and 0 otherwise. 0 is also called the negative class , and 1\\nthepositive class , and they are sometimes also denoted by the symbols “-”\\nand “+.” Given x(i), the corresponding y(i)is also called the label for the\\ntraining example.\\n2.1 Logistic regression\\nWe could approach the classiﬁcation problem ignoring the fact that yis\\ndiscrete-valued, and use our old linear regression algorithm to try to predict\\nygivenx. However, it is easy to construct examples where this method\\nperforms very poorly. Intuitively, it also doesn’t make sense for hθ(x) to take\\nvalues larger than 1 or smaller than 0 when we know that y∈{0,1}.\\nTo ﬁx this, let’s change the form for our hypotheses hθ(x). We will choose\\nhθ(x) =g(θTx) =1\\n1 +e−θTx,\\nwhere\\ng(z) =1\\n1 +e−z\\n20')]}"]},"metadata":{},"execution_count":69}]},{"cell_type":"code","source":["result[\"result\"]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":35},"id":"n2On634IHYjw","executionInfo":{"status":"ok","timestamp":1722974532410,"user_tz":-330,"elapsed":3,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"1f2ba270-65c3-40b5-b960-6edfa7fe1638"},"execution_count":70,"outputs":[{"output_type":"execute_result","data":{"text/plain":["\"I don't know. Thanks for asking!\""],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":70}]},{"cell_type":"markdown","source":["### Retrieval QA chain types"],"metadata":{"id":"2_IB40FFHhjP"}},{"cell_type":"code","source":["qa_chain_mr = RetrievalQA.from_chain_type(\n","    llm,\n","    retriever=vectordb.as_retriever(),\n","    chain_type=\"map_reduce\"\n",")"],"metadata":{"id":"AoiM3hh1HbVg","executionInfo":{"status":"ok","timestamp":1722974532410,"user_tz":-330,"elapsed":2,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":71,"outputs":[]},{"cell_type":"code","source":["result = qa_chain_mr({\"query\": question})"],"metadata":{"id":"krB9_RgjHkfi","executionInfo":{"status":"ok","timestamp":1722974539639,"user_tz":-330,"elapsed":7231,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":72,"outputs":[]},{"cell_type":"code","source":["result[\"result\"]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":52},"id":"uJn9mAXEHlg1","executionInfo":{"status":"ok","timestamp":1722974539639,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"fd3b2ceb-ac96-476e-91e3-0fe30673c76a"},"execution_count":73,"outputs":[{"output_type":"execute_result","data":{"text/plain":["'Yes, probability is a class topic, especially in the context of machine learning, learning theory, generalization error, and logistic regression.'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":73}]},{"cell_type":"code","source":["import os\n","os.environ[\"LANGCHAIN_TRACING_V2\"] = \"true\"\n","os.environ[\"LANGCHAIN_ENDPOINT\"] = \"https://api.langchain.plus\"\n","os.environ[\"LANGCHAIN_TRACING_V2\"] = \"true\"\n","\n","key_file_path = \"/content/drive/MyDrive/Confidential/Keys/smith.langchain.key\"\n","\n","# Read the API key from the file\n","with open(key_file_path, 'r') as file:\n","    os.environ[\"LANGCHAIN_API_KEY\"] = file.read().strip()"],"metadata":{"id":"SdGRZKhXIPQy","executionInfo":{"status":"ok","timestamp":1722974539639,"user_tz":-330,"elapsed":15,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":74,"outputs":[]},{"cell_type":"code","source":["qa_chain_mr = RetrievalQA.from_chain_type(\n","    llm,\n","    retriever=vectordb.as_retriever(),\n","    chain_type=\"map_reduce\"\n",")\n","result = qa_chain_mr({\"query\": question})\n","result[\"result\"]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":52},"id":"eIzIh70pI6bO","executionInfo":{"status":"ok","timestamp":1722974546711,"user_tz":-330,"elapsed":7085,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"42824ff7-7a7e-49b0-b22f-eb080c1a4745"},"execution_count":76,"outputs":[{"output_type":"execute_result","data":{"text/plain":["'Yes, probability is a class topic, especially in the context of machine learning, classification, logistic regression, and generalization error when evaluating hypotheses.'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":76}]},{"cell_type":"code","source":["qa_chain_mr"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"5lcF7w2lP6dm","executionInfo":{"status":"ok","timestamp":1722974546711,"user_tz":-330,"elapsed":4,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"ff2776b8-8a5b-4730-a4cc-de2f4fa09f9c"},"execution_count":77,"outputs":[{"output_type":"execute_result","data":{"text/plain":["RetrievalQA(combine_documents_chain=MapReduceDocumentsChain(llm_chain=LLMChain(prompt=ChatPromptTemplate(input_variables=['context', 'question'], messages=[SystemMessagePromptTemplate(prompt=PromptTemplate(input_variables=['context'], template='Use the following portion of a long document to see if any of the text is relevant to answer the question. \\nReturn any relevant text verbatim.\\n______________________\\n{context}')), HumanMessagePromptTemplate(prompt=PromptTemplate(input_variables=['question'], template='{question}'))]), llm=ChatOpenAI(client=<openai.resources.chat.completions.Completions object at 0x7fbccaa81b70>, async_client=<openai.resources.chat.completions.AsyncCompletions object at 0x7fbccab2c760>, temperature=0.0, openai_api_key='sk-svcacct-nAxrXp1K3I0wWyZGRQ1yT3BlbkFJuBJgprTlL5sk1rJnyeTe', openai_proxy='')), reduce_documents_chain=ReduceDocumentsChain(combine_documents_chain=StuffDocumentsChain(llm_chain=LLMChain(prompt=ChatPromptTemplate(input_variables=['question', 'summaries'], messages=[SystemMessagePromptTemplate(prompt=PromptTemplate(input_variables=['summaries'], template=\"Given the following extracted parts of a long document and a question, create a final answer. \\nIf you don't know the answer, just say that you don't know. Don't try to make up an answer.\\n______________________\\n{summaries}\")), HumanMessagePromptTemplate(prompt=PromptTemplate(input_variables=['question'], template='{question}'))]), llm=ChatOpenAI(client=<openai.resources.chat.completions.Completions object at 0x7fbccaa81b70>, async_client=<openai.resources.chat.completions.AsyncCompletions object at 0x7fbccab2c760>, temperature=0.0, openai_api_key='sk-svcacct-nAxrXp1K3I0wWyZGRQ1yT3BlbkFJuBJgprTlL5sk1rJnyeTe', openai_proxy='')), document_variable_name='summaries')), document_variable_name='context'), retriever=VectorStoreRetriever(tags=['Chroma', 'OpenAIEmbeddings'], vectorstore=<langchain_community.vectorstores.chroma.Chroma object at 0x7fbccaa7a2f0>))"]},"metadata":{},"execution_count":77}]},{"cell_type":"code","source":["qa_chain_mr = RetrievalQA.from_chain_type(\n","    llm,\n","    retriever=vectordb.as_retriever(),\n","    chain_type=\"refine\"\n",")\n","\n","result = qa_chain_mr({\"query\": question})\n","result[\"result\"]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":157},"id":"V8GhTenTI83S","executionInfo":{"status":"ok","timestamp":1722974557894,"user_tz":-330,"elapsed":8622,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"deaae8d5-07f8-4f00-cf5d-fc6e1a051fb0"},"execution_count":78,"outputs":[{"output_type":"execute_result","data":{"text/plain":["'The provided context further elaborates on the classification problem and logistic regression in the context of binary classification. Logistic regression is specifically mentioned as a method to address the classification problem where the values to be predicted are discrete and take on only two values (0 and 1). The context explains the need for a different approach compared to linear regression due to the discrete nature of the output variable y. The logistic regression hypothesis is introduced as a way to ensure that the predicted values fall within the range of 0 and 1, which aligns with the binary classification problem.\\n\\nTherefore, based on the additional context provided, the original answer remains relevant and accurate. Probability is indeed a class topic in the context of binary classification and logistic regression, as it is used to define the logistic regression hypothesis and calculate the probabilities associated with different outcomes.'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":78}]},{"cell_type":"markdown","source":["### RetrievalQA Limitations"],"metadata":{"id":"NmA5qK4ISaYL"}},{"cell_type":"code","source":["qa_chain = RetrievalQA.from_chain_type(\n","    llm,\n","    retriever=vectordb.as_retriever()\n",")"],"metadata":{"id":"DcQDoUalSIjH","executionInfo":{"status":"ok","timestamp":1722974592644,"user_tz":-330,"elapsed":589,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":79,"outputs":[]},{"cell_type":"code","source":["question = \"Is probability a class topic?\"\n","result = qa_chain({\"query\": question})\n","result[\"result\"]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":52},"id":"R7bEJyB0SdmT","executionInfo":{"status":"ok","timestamp":1722974601086,"user_tz":-330,"elapsed":3810,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"3efcb4a7-b201-4d34-fa64-369c07327313"},"execution_count":80,"outputs":[{"output_type":"execute_result","data":{"text/plain":["'Yes, probability is a class topic. It is often covered in mathematics, statistics, and various other fields such as computer science, economics, and engineering. Probability theory is essential for understanding uncertainty, making predictions, and analyzing data.'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":80}]},{"cell_type":"code","source":["question = \"why are those prerequesites needed?\"\n","result = qa_chain({\"query\": question})\n","result[\"result\"]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":35},"id":"7VNitzK6Se3w","executionInfo":{"status":"ok","timestamp":1722974604102,"user_tz":-330,"elapsed":1553,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"5eae15f8-9a83-4bae-fdab-fe48f64cdc69"},"execution_count":81,"outputs":[{"output_type":"execute_result","data":{"text/plain":["\"I don't have enough context to provide a specific answer to your question.\""],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":81}]},{"cell_type":"markdown","source":["## 7. Chat"],"metadata":{"id":"bUeLFKRPSl6n"}},{"cell_type":"code","source":["from langchain.vectorstores import Chroma\n","from langchain.embeddings.openai import OpenAIEmbeddings\n","\n","embedding = OpenAIEmbeddings()\n","vectordb = Chroma(persist_directory=persist_directory, embedding_function=embedding)"],"metadata":{"id":"2dFbVlI8SgH_"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["question = \"What are major topics for this class?\"\n","docs = vectordb.similarity_search(question,k=3)\n","len(docs)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"EpOe-wwCVLss","executionInfo":{"status":"ok","timestamp":1722975307508,"user_tz":-330,"elapsed":474,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"3ca781a4-e22c-45ad-dd5f-4ba80b1d66d8"},"execution_count":82,"outputs":[{"output_type":"execute_result","data":{"text/plain":["3"]},"metadata":{},"execution_count":82}]},{"cell_type":"code","source":["from langchain.chat_models import ChatOpenAI\n","llm = ChatOpenAI(model_name=llm_model, temperature=0,openai_api_key=api_key)\n","llm.predict(\"Hello world!\")"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":90},"id":"e4z5EJqYVL7_","executionInfo":{"status":"ok","timestamp":1722975348328,"user_tz":-330,"elapsed":2199,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"b47a6422-7d71-4959-e896-16ec4fe119ee"},"execution_count":84,"outputs":[{"output_type":"stream","name":"stderr","text":["/usr/local/lib/python3.10/dist-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The method `BaseChatModel.predict` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.\n","  warn_deprecated(\n"]},{"output_type":"execute_result","data":{"text/plain":["'Hello! How can I assist you today?'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":84}]},{"cell_type":"code","source":["# Build prompt\n","from langchain.prompts import PromptTemplate\n","template = \"\"\"Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer. Use three sentences maximum. Keep the answer as concise as possible. Always say \"thanks for asking!\" at the end of the answer.\n","{context}\n","Question: {question}\n","Helpful Answer:\"\"\"\n","QA_CHAIN_PROMPT = PromptTemplate(input_variables=[\"context\", \"question\"],template=template,)\n","\n","# Run chain\n","from langchain.chains import RetrievalQA\n","question = \"Is probability a class topic?\"\n","qa_chain = RetrievalQA.from_chain_type(llm,\n","                                       retriever=vectordb.as_retriever(),\n","                                       return_source_documents=True,\n","                                       chain_type_kwargs={\"prompt\": QA_CHAIN_PROMPT})\n","\n","\n","result = qa_chain({\"query\": question})\n","result[\"result\"]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":35},"id":"vQReQ6HrVPy2","executionInfo":{"status":"ok","timestamp":1722975359530,"user_tz":-330,"elapsed":1710,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"6e3ca61f-8849-43f5-e8fe-40499793c437"},"execution_count":85,"outputs":[{"output_type":"execute_result","data":{"text/plain":["\"I don't know. Thanks for asking!\""],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":85}]},{"cell_type":"code","source":["from langchain.memory import ConversationBufferMemory\n","memory = ConversationBufferMemory(\n","    memory_key=\"chat_history\",\n","    return_messages=True\n",")"],"metadata":{"id":"PfK4AhDuVYaR","executionInfo":{"status":"ok","timestamp":1722975368107,"user_tz":-330,"elapsed":623,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":86,"outputs":[]},{"cell_type":"code","source":["from langchain.chains import ConversationalRetrievalChain\n","retriever=vectordb.as_retriever()\n","qa = ConversationalRetrievalChain.from_llm(\n","    llm,\n","    retriever=retriever,\n","    memory=memory\n",")"],"metadata":{"id":"TVQbpXgmVa6L","executionInfo":{"status":"ok","timestamp":1722975374796,"user_tz":-330,"elapsed":479,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":87,"outputs":[]},{"cell_type":"code","source":["question = \"Is probability a class topic?\"\n","result = qa({\"question\": question})"],"metadata":{"id":"9kwFHW7PVck8","executionInfo":{"status":"ok","timestamp":1722975383239,"user_tz":-330,"elapsed":1983,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":88,"outputs":[]},{"cell_type":"code","source":["result['answer']"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":52},"id":"R4KBw3ieVeRO","executionInfo":{"status":"ok","timestamp":1722975386603,"user_tz":-330,"elapsed":467,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"1e179efe-bd54-4aa4-b4f8-49f85179f4e8"},"execution_count":89,"outputs":[{"output_type":"execute_result","data":{"text/plain":["'Yes, probability is a class topic. It is often covered in mathematics, statistics, and other related fields. In the context provided, probability is discussed in relation to learning theory and classification problems.'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":89}]},{"cell_type":"code","source":["question = \"why are those prerequesites needed?\"\n","result = qa({\"question\": question})"],"metadata":{"id":"4CS_vDA3Vfde","executionInfo":{"status":"ok","timestamp":1722975394722,"user_tz":-330,"elapsed":3247,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":90,"outputs":[]},{"cell_type":"code","source":["result['answer']"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":104},"id":"vOHM1FZ6VgxC","executionInfo":{"status":"ok","timestamp":1722975395411,"user_tz":-330,"elapsed":3,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"f3cc0dbb-fb00-488a-db54-c6f4be01dc3a"},"execution_count":91,"outputs":[{"output_type":"execute_result","data":{"text/plain":["'Prerequisites are needed for discussing probability in the context of learning theory and classification problems because understanding probability theory is essential for analyzing the performance of learning algorithms, evaluating generalization error, and making informed decisions about model selection. Probability theory provides the foundation for quantifying uncertainty, measuring the likelihood of events, and assessing the performance of machine learning models. Without a solid understanding of probability, it would be challenging to interpret and analyze the results of learning algorithms accurately in the context of classification problems.'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":91}]},{"cell_type":"markdown","source":["### Chatbot"],"metadata":{"id":"BrvsGwJjViF5"}},{"cell_type":"code","source":["from langchain.embeddings.openai import OpenAIEmbeddings\n","from langchain.text_splitter import CharacterTextSplitter, RecursiveCharacterTextSplitter\n","from langchain.vectorstores import DocArrayInMemorySearch\n","from langchain.document_loaders import TextLoader\n","from langchain.chains import RetrievalQA,  ConversationalRetrievalChain\n","from langchain.memory import ConversationBufferMemory\n","from langchain.chat_models import ChatOpenAI\n","from langchain.document_loaders import TextLoader\n","from langchain.document_loaders import PyPDFLoader"],"metadata":{"id":"Y5-jgvXFVi-K","executionInfo":{"status":"ok","timestamp":1722975409187,"user_tz":-330,"elapsed":480,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":92,"outputs":[]},{"cell_type":"code","source":["def load_db(file, chain_type, k):\n","    # load documents\n","    loader = PyPDFLoader(file)\n","    documents = loader.load()\n","    # split documents\n","    text_splitter = RecursiveCharacterTextSplitter(chunk_size=1000, chunk_overlap=150)\n","    docs = text_splitter.split_documents(documents)\n","    # define embedding\n","    embeddings = OpenAIEmbeddings(openai_api_key=api_key)\n","    # create vector database from data\n","    db = DocArrayInMemorySearch.from_documents(docs, embeddings)\n","    # define retriever\n","    retriever = db.as_retriever(search_type=\"similarity\", search_kwargs={\"k\": k})\n","    # create a chatbot chain. Memory is managed externally.\n","    qa = ConversationalRetrievalChain.from_llm(\n","        llm=ChatOpenAI(model_name=llm_model, temperature=0,openai_api_key=api_key),\n","        chain_type=chain_type,\n","        retriever=retriever,\n","        return_source_documents=True,\n","        return_generated_question=True,\n","    )\n","    return qa\n"],"metadata":{"id":"wW-3ugMTVk-g","executionInfo":{"status":"ok","timestamp":1722975764441,"user_tz":-330,"elapsed":471,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":111,"outputs":[]},{"cell_type":"code","source":["!pip install docarray\n","!pip install jupyter_bokeh"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"_qKF0qpIWHmy","executionInfo":{"status":"ok","timestamp":1722975771997,"user_tz":-330,"elapsed":6285,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"5734a300-a892-4541-929a-0b40339e2298"},"execution_count":112,"outputs":[{"output_type":"stream","name":"stdout","text":["Requirement already satisfied: docarray in /usr/local/lib/python3.10/dist-packages (0.40.0)\n","Requirement already satisfied: numpy>=1.17.3 in /usr/local/lib/python3.10/dist-packages (from docarray) (1.26.4)\n","Requirement already satisfied: orjson>=3.8.2 in /usr/local/lib/python3.10/dist-packages (from docarray) (3.10.6)\n","Requirement already satisfied: pydantic>=1.10.8 in /usr/local/lib/python3.10/dist-packages (from docarray) (2.8.2)\n","Requirement already satisfied: rich>=13.1.0 in /usr/local/lib/python3.10/dist-packages (from docarray) (13.7.1)\n","Requirement already satisfied: types-requests>=2.28.11.6 in /usr/local/lib/python3.10/dist-packages (from docarray) (2.32.0.20240712)\n","Requirement already satisfied: typing-inspect>=0.8.0 in /usr/local/lib/python3.10/dist-packages (from docarray) (0.9.0)\n","Requirement already satisfied: annotated-types>=0.4.0 in /usr/local/lib/python3.10/dist-packages (from pydantic>=1.10.8->docarray) (0.7.0)\n","Requirement already satisfied: pydantic-core==2.20.1 in /usr/local/lib/python3.10/dist-packages (from pydantic>=1.10.8->docarray) (2.20.1)\n","Requirement already satisfied: typing-extensions>=4.6.1 in /usr/local/lib/python3.10/dist-packages (from pydantic>=1.10.8->docarray) (4.12.2)\n","Requirement already satisfied: markdown-it-py>=2.2.0 in /usr/local/lib/python3.10/dist-packages (from rich>=13.1.0->docarray) (3.0.0)\n","Requirement already satisfied: pygments<3.0.0,>=2.13.0 in /usr/local/lib/python3.10/dist-packages (from rich>=13.1.0->docarray) (2.16.1)\n","Requirement already satisfied: urllib3>=2 in /usr/local/lib/python3.10/dist-packages (from types-requests>=2.28.11.6->docarray) (2.2.2)\n","Requirement already satisfied: mypy-extensions>=0.3.0 in /usr/local/lib/python3.10/dist-packages (from typing-inspect>=0.8.0->docarray) (1.0.0)\n","Requirement already satisfied: mdurl~=0.1 in /usr/local/lib/python3.10/dist-packages (from markdown-it-py>=2.2.0->rich>=13.1.0->docarray) (0.1.2)\n"]}]},{"cell_type":"code","source":["import panel as pn\n","import param\n","\n","class cbfs(param.Parameterized):\n","    chat_history = param.List([])\n","    answer = param.String(\"\")\n","    db_query  = param.String(\"\")\n","    db_response = param.List([])\n","\n","    def __init__(self,  **params):\n","        super(cbfs, self).__init__( **params)\n","        self.panels = []\n","        self.loaded_file = \"https://ai.stanford.edu/~nilsson/MLBOOK.pdf\"\n","        self.qa = load_db(self.loaded_file,\"stuff\", 4)\n","\n","    def call_load_db(self, count):\n","        if count == 0 or file_input.value is None:  # init or no file specified :\n","            return pn.pane.Markdown(f\"Loaded File: {self.loaded_file}\")\n","        else:\n","            file_input.save(\"temp.pdf\")  # local copy\n","            self.loaded_file = file_input.filename\n","            button_load.button_style=\"outline\"\n","            self.qa = load_db(\"temp.pdf\", \"stuff\", 4)\n","            button_load.button_style=\"solid\"\n","        self.clr_history()\n","        return pn.pane.Markdown(f\"Loaded File: {self.loaded_file}\")\n","\n","    def convchain(self, query):\n","        if not query:\n","            return pn.WidgetBox(pn.Row('User:', pn.pane.Markdown(\"\", width=600)), scroll=True)\n","        result = self.qa({\"question\": query, \"chat_history\": self.chat_history})\n","        self.chat_history.extend([(query, result[\"answer\"])])\n","        self.db_query = result[\"generated_question\"]\n","        self.db_response = result[\"source_documents\"]\n","        self.answer = result['answer']\n","        self.panels.extend([\n","            pn.Row('User:', pn.pane.Markdown(query, width=600)),\n","            pn.Row('ChatBot:', pn.pane.Markdown(self.answer, width=600, style={'background-color': '#F6F6F6'}))\n","        ])\n","        inp.value = ''  #clears loading indicator when cleared\n","        return pn.WidgetBox(*self.panels,scroll=True)\n","\n","    @param.depends('db_query ', )\n","    def get_lquest(self):\n","        if not self.db_query :\n","            return pn.Column(\n","                pn.Row(pn.pane.Markdown(f\"Last question to DB:\", styles={'background-color': '#F6F6F6'})),\n","                pn.Row(pn.pane.Str(\"no DB accesses so far\"))\n","            )\n","        return pn.Column(\n","            pn.Row(pn.pane.Markdown(f\"DB query:\", styles={'background-color': '#F6F6F6'})),\n","            pn.pane.Str(self.db_query )\n","        )\n","\n","    @param.depends('db_response', )\n","    def get_sources(self):\n","        if not self.db_response:\n","            return\n","        rlist=[pn.Row(pn.pane.Markdown(f\"Result of DB lookup:\", styles={'background-color': '#F6F6F6'}))]\n","        for doc in self.db_response:\n","            rlist.append(pn.Row(pn.pane.Str(doc)))\n","        return pn.WidgetBox(*rlist, width=600, scroll=True)\n","\n","    @param.depends('convchain', 'clr_history')\n","    def get_chats(self):\n","        if not self.chat_history:\n","            return pn.WidgetBox(pn.Row(pn.pane.Str(\"No History Yet\")), width=600, scroll=True)\n","        rlist=[pn.Row(pn.pane.Markdown(f\"Current Chat History variable\", styles={'background-color': '#F6F6F6'}))]\n","        for exchange in self.chat_history:\n","            rlist.append(pn.Row(pn.pane.Str(exchange)))\n","        return pn.WidgetBox(*rlist, width=600, scroll=True)\n","\n","    def clr_history(self,count=0):\n","        self.chat_history = []\n","        return\n"],"metadata":{"id":"Ytyr33U5Vmqo","executionInfo":{"status":"ok","timestamp":1722975771997,"user_tz":-330,"elapsed":16,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}}},"execution_count":113,"outputs":[]},{"cell_type":"code","source":["pn.extension()"],"metadata":{"id":"VhRsXGxEXZQ7"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["cb = cbfs()"],"metadata":{"id":"WOlfAp-6XQtP"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["\n","\n","file_input = pn.widgets.FileInput(accept='.pdf')\n","button_load = pn.widgets.Button(name=\"Load DB\", button_type='primary')\n","button_clearhistory = pn.widgets.Button(name=\"Clear History\", button_type='warning')\n","button_clearhistory.on_click(cb.clr_history)\n","inp = pn.widgets.TextInput( placeholder='Enter text here…')\n","\n","bound_button_load = pn.bind(cb.call_load_db, button_load.param.clicks)\n","conversation = pn.bind(cb.convchain, inp)\n","\n","jpg_pane = pn.pane.Image( './img/convchain.jpg')\n","\n","tab1 = pn.Column(\n","    pn.Row(inp),\n","    pn.layout.Divider(),\n","    pn.panel(conversation,  loading_indicator=True, height=300),\n","    pn.layout.Divider(),\n",")\n","tab2= pn.Column(\n","    pn.panel(cb.get_lquest),\n","    pn.layout.Divider(),\n","    pn.panel(cb.get_sources ),\n",")\n","tab3= pn.Column(\n","    pn.panel(cb.get_chats),\n","    pn.layout.Divider(),\n",")\n","tab4=pn.Column(\n","    pn.Row( file_input, button_load, bound_button_load),\n","    pn.Row( button_clearhistory, pn.pane.Markdown(\"Clears chat history. Can use to start a new topic\" )),\n","    pn.layout.Divider(),\n","    pn.Row(jpg_pane.clone(width=400))\n",")\n","dashboard = pn.Column(\n","    pn.Row(pn.pane.Markdown('# ChatWithYourData_Bot')),\n","    pn.Tabs(('Conversation', tab1), ('Database', tab2), ('Chat History', tab3),('Configure', tab4))\n",")\n","dashboard"],"metadata":{"colab":{"resources":{"http://localhost:8080/img/convchain.jpg":{"data":"CjwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPWVuPgogIDxtZXRhIGNoYXJzZXQ9dXRmLTg+CiAgPG1ldGEgbmFtZT12aWV3cG9ydCBjb250ZW50PSJpbml0aWFsLXNjYWxlPTEsIG1pbmltdW0tc2NhbGU9MSwgd2lkdGg9ZGV2aWNlLXdpZHRoIj4KICA8dGl0bGU+RXJyb3IgNDA0IChOb3QgRm91bmQpISExPC90aXRsZT4KICA8c3R5bGU+CiAgICAqe21hcmdpbjowO3BhZGRpbmc6MH1odG1sLGNvZGV7Zm9udDoxNXB4LzIycHggYXJpYWwsc2Fucy1zZXJpZn1odG1se2JhY2tncm91bmQ6I2ZmZjtjb2xvcjojMjIyO3BhZGRpbmc6MTVweH1ib2R5e21hcmdpbjo3JSBhdXRvIDA7bWF4LXdpZHRoOjM5MHB4O21pbi1oZWlnaHQ6MTgwcHg7cGFkZGluZzozMHB4IDAgMTVweH0qID4gYm9keXtiYWNrZ3JvdW5kOnVybCgvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9lcnJvcnMvcm9ib3QucG5nKSAxMDAlIDVweCBuby1yZXBlYXQ7cGFkZGluZy1yaWdodDoyMDVweH1we21hcmdpbjoxMXB4IDAgMjJweDtvdmVyZmxvdzpoaWRkZW59aW5ze2NvbG9yOiM3Nzc7dGV4dC1kZWNvcmF0aW9uOm5vbmV9YSBpbWd7Ym9yZGVyOjB9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo3NzJweCl7Ym9keXtiYWNrZ3JvdW5kOm5vbmU7bWFyZ2luLXRvcDowO21heC13aWR0aDpub25lO3BhZGRpbmctcmlnaHQ6MH19I2xvZ297YmFja2dyb3VuZDp1cmwoLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvbG9nb3MvZXJyb3JwYWdlL2Vycm9yX2xvZ28tMTUweDU0LnBuZykgbm8tcmVwZWF0O21hcmdpbi1sZWZ0Oi01cHh9QG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXJlc29sdXRpb246MTkyZHBpKXsjbG9nb3tiYWNrZ3JvdW5kOnVybCgvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9sb2dvcy9lcnJvcnBhZ2UvZXJyb3JfbG9nby0xNTB4NTQtMngucG5nKSBuby1yZXBlYXQgMCUgMCUvMTAwJSAxMDAlOy1tb3otYm9yZGVyLWltYWdlOnVybCgvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9sb2dvcy9lcnJvcnBhZ2UvZXJyb3JfbG9nby0xNTB4NTQtMngucG5nKSAwfX1AbWVkaWEgb25seSBzY3JlZW4gYW5kICgtd2Via2l0LW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86Mil7I2xvZ297YmFja2dyb3VuZDp1cmwoLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvbG9nb3MvZXJyb3JwYWdlL2Vycm9yX2xvZ28tMTUweDU0LTJ4LnBuZykgbm8tcmVwZWF0Oy13ZWJraXQtYmFja2dyb3VuZC1zaXplOjEwMCUgMTAwJX19I2xvZ297ZGlzcGxheTppbmxpbmUtYmxvY2s7aGVpZ2h0OjU0cHg7d2lkdGg6MTUwcHh9CiAgPC9zdHlsZT4KICA8YSBocmVmPS8vd3d3Lmdvb2dsZS5jb20vPjxzcGFuIGlkPWxvZ28gYXJpYS1sYWJlbD1Hb29nbGU+PC9zcGFuPjwvYT4KICA8cD48Yj40MDQuPC9iPiA8aW5zPlRoYXTigJlzIGFuIGVycm9yLjwvaW5zPgogIDxwPiAgPGlucz5UaGF04oCZcyBhbGwgd2Uga25vdy48L2lucz4K","ok":false,"headers":[["content-length","1449"],["content-type","text/html; charset=utf-8"]],"status":404,"status_text":""}},"base_uri":"https://localhost:8080/","height":481},"id":"V6r5H19gVoN7","executionInfo":{"status":"ok","timestamp":1722975854448,"user_tz":-330,"elapsed":2078,"user":{"displayName":"Shashwat Gupta","userId":"16181008116392135827"}},"outputId":"dbf44880-099f-4775-d90b-cfe5fb42acfe"},"execution_count":118,"outputs":[{"output_type":"display_data","data":{"application/javascript":["(function(root) {\n","  function now() {\n","    return new Date();\n","  }\n","\n","  var force = true;\n","  var py_version = '3.4.3'.replace('rc', '-rc.').replace('.dev', '-dev.');\n","  var reloading = false;\n","  var Bokeh = root.Bokeh;\n","\n","  if (typeof (root._bokeh_timeout) === \"undefined\" || force) {\n","    root._bokeh_timeout = Date.now() + 5000;\n","    root._bokeh_failed_load = false;\n","  }\n","\n","  function run_callbacks() {\n","    try {\n","      root._bokeh_onload_callbacks.forEach(function(callback) {\n","        if (callback != null)\n","          callback();\n","      });\n","    } finally {\n","      delete root._bokeh_onload_callbacks;\n","    }\n","    console.debug(\"Bokeh: all callbacks have finished\");\n","  }\n","\n","  function load_libs(css_urls, js_urls, js_modules, js_exports, callback) {\n","    if (css_urls == null) css_urls = [];\n","    if (js_urls == null) js_urls = [];\n","    if (js_modules == null) js_modules = [];\n","    if (js_exports == null) js_exports = {};\n","\n","    root._bokeh_onload_callbacks.push(callback);\n","\n","    if (root._bokeh_is_loading > 0) {\n","      console.debug(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n","      return null;\n","    }\n","    if (js_urls.length === 0 && js_modules.length === 0 && Object.keys(js_exports).length === 0) {\n","      run_callbacks();\n","      return null;\n","    }\n","    if (!reloading) {\n","      console.debug(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n","    }\n","\n","    function on_load() {\n","      root._bokeh_is_loading--;\n","      if (root._bokeh_is_loading === 0) {\n","        console.debug(\"Bokeh: all BokehJS libraries/stylesheets loaded\");\n","        run_callbacks()\n","      }\n","    }\n","    window._bokeh_on_load = on_load\n","\n","    function on_error() {\n","      console.error(\"failed to load \" + url);\n","    }\n","\n","    var skip = [];\n","    if (window.requirejs) {\n","      window.requirejs.config({'packages': {}, 'paths': {}, 'shim': {}});\n","      root._bokeh_is_loading = css_urls.length + 0;\n","    } else {\n","      root._bokeh_is_loading = css_urls.length + js_urls.length + js_modules.length + Object.keys(js_exports).length;\n","    }\n","\n","    var existing_stylesheets = []\n","    var links = document.getElementsByTagName('link')\n","    for (var i = 0; i < links.length; i++) {\n","      var link = links[i]\n","      if (link.href != null) {\n","\texisting_stylesheets.push(link.href)\n","      }\n","    }\n","    for (var i = 0; i < css_urls.length; i++) {\n","      var url = css_urls[i];\n","      if (existing_stylesheets.indexOf(url) !== -1) {\n","\ton_load()\n","\tcontinue;\n","      }\n","      const element = document.createElement(\"link\");\n","      element.onload = on_load;\n","      element.onerror = on_error;\n","      element.rel = \"stylesheet\";\n","      element.type = \"text/css\";\n","      element.href = url;\n","      console.debug(\"Bokeh: injecting link tag for BokehJS stylesheet: \", url);\n","      document.body.appendChild(element);\n","    }    var existing_scripts = []\n","    var scripts = document.getElementsByTagName('script')\n","    for (var i = 0; i < scripts.length; i++) {\n","      var script = scripts[i]\n","      if (script.src != null) {\n","\texisting_scripts.push(script.src)\n","      }\n","    }\n","    for (var i = 0; i < js_urls.length; i++) {\n","      var url = js_urls[i];\n","      if (skip.indexOf(url) !== -1 || existing_scripts.indexOf(url) !== -1) {\n","\tif (!window.requirejs) {\n","\t  on_load();\n","\t}\n","\tcontinue;\n","      }\n","      var element = document.createElement('script');\n","      element.onload = on_load;\n","      element.onerror = on_error;\n","      element.async = false;\n","      element.src = url;\n","      console.debug(\"Bokeh: injecting script tag for BokehJS library: \", url);\n","      document.head.appendChild(element);\n","    }\n","    for (var i = 0; i < js_modules.length; i++) {\n","      var url = js_modules[i];\n","      if (skip.indexOf(url) !== -1 || existing_scripts.indexOf(url) !== -1) {\n","\tif (!window.requirejs) {\n","\t  on_load();\n","\t}\n","\tcontinue;\n","      }\n","      var element = document.createElement('script');\n","      element.onload = on_load;\n","      element.onerror = on_error;\n","      element.async = false;\n","      element.src = url;\n","      element.type = \"module\";\n","      console.debug(\"Bokeh: injecting script tag for BokehJS library: \", url);\n","      document.head.appendChild(element);\n","    }\n","    for (const name in js_exports) {\n","      var url = js_exports[name];\n","      if (skip.indexOf(url) >= 0 || root[name] != null) {\n","\tif (!window.requirejs) {\n","\t  on_load();\n","\t}\n","\tcontinue;\n","      }\n","      var element = document.createElement('script');\n","      element.onerror = on_error;\n","      element.async = false;\n","      element.type = \"module\";\n","      console.debug(\"Bokeh: injecting script tag for BokehJS library: \", url);\n","      element.textContent = `\n","      import ${name} from \"${url}\"\n","      window.${name} = ${name}\n","      window._bokeh_on_load()\n","      `\n","      document.head.appendChild(element);\n","    }\n","    if (!js_urls.length && !js_modules.length) {\n","      on_load()\n","    }\n","  };\n","\n","  function inject_raw_css(css) {\n","    const element = document.createElement(\"style\");\n","    element.appendChild(document.createTextNode(css));\n","    document.body.appendChild(element);\n","  }\n","\n","  var js_urls = [\"https://cdn.bokeh.org/bokeh/release/bokeh-3.4.3.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.4.3.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.4.3.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.4.3.min.js\", \"https://cdn.holoviz.org/panel/1.4.4/dist/panel.min.js\"];\n","  var js_modules = [];\n","  var js_exports = {};\n","  var css_urls = [];\n","  var inline_js = [    function(Bokeh) {\n","      Bokeh.set_log_level(\"info\");\n","    },\n","function(Bokeh) {} // ensure no trailing comma for IE\n","  ];\n","\n","  function run_inline_js() {\n","    if ((root.Bokeh !== undefined) || (force === true)) {\n","      for (var i = 0; i < inline_js.length; i++) {\n","\ttry {\n","          inline_js[i].call(root, root.Bokeh);\n","\t} catch(e) {\n","\t  if (!reloading) {\n","\t    throw e;\n","\t  }\n","\t}\n","      }\n","      // Cache old bokeh versions\n","      if (Bokeh != undefined && !reloading) {\n","\tvar NewBokeh = root.Bokeh;\n","\tif (Bokeh.versions === undefined) {\n","\t  Bokeh.versions = new Map();\n","\t}\n","\tif (NewBokeh.version !== Bokeh.version) {\n","\t  Bokeh.versions.set(NewBokeh.version, NewBokeh)\n","\t}\n","\troot.Bokeh = Bokeh;\n","      }} else if (Date.now() < root._bokeh_timeout) {\n","      setTimeout(run_inline_js, 100);\n","    } else if (!root._bokeh_failed_load) {\n","      console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n","      root._bokeh_failed_load = true;\n","    }\n","    root._bokeh_is_initializing = false\n","  }\n","\n","  function load_or_wait() {\n","    // Implement a backoff loop that tries to ensure we do not load multiple\n","    // versions of Bokeh and its dependencies at the same time.\n","    // In recent versions we use the root._bokeh_is_initializing flag\n","    // to determine whether there is an ongoing attempt to initialize\n","    // bokeh, however for backward compatibility we also try to ensure\n","    // that we do not start loading a newer (Panel>=1.0 and Bokeh>3) version\n","    // before older versions are fully initialized.\n","    if (root._bokeh_is_initializing && Date.now() > root._bokeh_timeout) {\n","      root._bokeh_is_initializing = false;\n","      root._bokeh_onload_callbacks = undefined;\n","      console.log(\"Bokeh: BokehJS was loaded multiple times but one version failed to initialize.\");\n","      load_or_wait();\n","    } else if (root._bokeh_is_initializing || (typeof root._bokeh_is_initializing === \"undefined\" && root._bokeh_onload_callbacks !== undefined)) {\n","      setTimeout(load_or_wait, 100);\n","    } else {\n","      root._bokeh_is_initializing = true\n","      root._bokeh_onload_callbacks = []\n","      var bokeh_loaded = Bokeh != null && (Bokeh.version === py_version || (Bokeh.versions !== undefined && Bokeh.versions.has(py_version)));\n","      if (!reloading && !bokeh_loaded) {\n","\troot.Bokeh = undefined;\n","      }\n","      load_libs(css_urls, js_urls, js_modules, js_exports, function() {\n","\tconsole.debug(\"Bokeh: BokehJS plotting callback run at\", now());\n","\trun_inline_js();\n","      });\n","    }\n","  }\n","  // Give older versions of the autoload script a head-start to ensure\n","  // they initialize before we start loading newer version.\n","  setTimeout(load_or_wait, 100)\n","}(window));"],"application/vnd.holoviews_load.v0+json":"(function(root) {\n  function now() {\n    return new Date();\n  }\n\n  var force = true;\n  var py_version = '3.4.3'.replace('rc', '-rc.').replace('.dev', '-dev.');\n  var reloading = false;\n  var Bokeh = root.Bokeh;\n\n  if (typeof (root._bokeh_timeout) === \"undefined\" || force) {\n    root._bokeh_timeout = Date.now() + 5000;\n    root._bokeh_failed_load = false;\n  }\n\n  function run_callbacks() {\n    try {\n      root._bokeh_onload_callbacks.forEach(function(callback) {\n        if (callback != null)\n          callback();\n      });\n    } finally {\n      delete root._bokeh_onload_callbacks;\n    }\n    console.debug(\"Bokeh: all callbacks have finished\");\n  }\n\n  function load_libs(css_urls, js_urls, js_modules, js_exports, callback) {\n    if (css_urls == null) css_urls = [];\n    if (js_urls == null) js_urls = [];\n    if (js_modules == null) js_modules = [];\n    if (js_exports == null) js_exports = {};\n\n    root._bokeh_onload_callbacks.push(callback);\n\n    if (root._bokeh_is_loading > 0) {\n      console.debug(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n      return null;\n    }\n    if (js_urls.length === 0 && js_modules.length === 0 && Object.keys(js_exports).length === 0) {\n      run_callbacks();\n      return null;\n    }\n    if (!reloading) {\n      console.debug(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n    }\n\n    function on_load() {\n      root._bokeh_is_loading--;\n      if (root._bokeh_is_loading === 0) {\n        console.debug(\"Bokeh: all BokehJS libraries/stylesheets loaded\");\n        run_callbacks()\n      }\n    }\n    window._bokeh_on_load = on_load\n\n    function on_error() {\n      console.error(\"failed to load \" + url);\n    }\n\n    var skip = [];\n    if (window.requirejs) {\n      window.requirejs.config({'packages': {}, 'paths': {}, 'shim': {}});\n      root._bokeh_is_loading = css_urls.length + 0;\n    } else {\n      root._bokeh_is_loading = css_urls.length + js_urls.length + js_modules.length + Object.keys(js_exports).length;\n    }\n\n    var existing_stylesheets = []\n    var links = document.getElementsByTagName('link')\n    for (var i = 0; i < links.length; i++) {\n      var link = links[i]\n      if (link.href != null) {\n\texisting_stylesheets.push(link.href)\n      }\n    }\n    for (var i = 0; i < css_urls.length; i++) {\n      var url = css_urls[i];\n      if (existing_stylesheets.indexOf(url) !== -1) {\n\ton_load()\n\tcontinue;\n      }\n      const element = document.createElement(\"link\");\n      element.onload = on_load;\n      element.onerror = on_error;\n      element.rel = \"stylesheet\";\n      element.type = \"text/css\";\n      element.href = url;\n      console.debug(\"Bokeh: injecting link tag for BokehJS stylesheet: \", url);\n      document.body.appendChild(element);\n    }    var existing_scripts = []\n    var scripts = document.getElementsByTagName('script')\n    for (var i = 0; i < scripts.length; i++) {\n      var script = scripts[i]\n      if (script.src != null) {\n\texisting_scripts.push(script.src)\n      }\n    }\n    for (var i = 0; i < js_urls.length; i++) {\n      var url = js_urls[i];\n      if (skip.indexOf(url) !== -1 || existing_scripts.indexOf(url) !== -1) {\n\tif (!window.requirejs) {\n\t  on_load();\n\t}\n\tcontinue;\n      }\n      var element = document.createElement('script');\n      element.onload = on_load;\n      element.onerror = on_error;\n      element.async = false;\n      element.src = url;\n      console.debug(\"Bokeh: injecting script tag for BokehJS library: \", url);\n      document.head.appendChild(element);\n    }\n    for (var i = 0; i < js_modules.length; i++) {\n      var url = js_modules[i];\n      if (skip.indexOf(url) !== -1 || existing_scripts.indexOf(url) !== -1) {\n\tif (!window.requirejs) {\n\t  on_load();\n\t}\n\tcontinue;\n      }\n      var element = document.createElement('script');\n      element.onload = on_load;\n      element.onerror = on_error;\n      element.async = false;\n      element.src = url;\n      element.type = \"module\";\n      console.debug(\"Bokeh: injecting script tag for BokehJS library: \", url);\n      document.head.appendChild(element);\n    }\n    for (const name in js_exports) {\n      var url = js_exports[name];\n      if (skip.indexOf(url) >= 0 || root[name] != null) {\n\tif (!window.requirejs) {\n\t  on_load();\n\t}\n\tcontinue;\n      }\n      var element = document.createElement('script');\n      element.onerror = on_error;\n      element.async = false;\n      element.type = \"module\";\n      console.debug(\"Bokeh: injecting script tag for BokehJS library: \", url);\n      element.textContent = `\n      import ${name} from \"${url}\"\n      window.${name} = ${name}\n      window._bokeh_on_load()\n      `\n      document.head.appendChild(element);\n    }\n    if (!js_urls.length && !js_modules.length) {\n      on_load()\n    }\n  };\n\n  function inject_raw_css(css) {\n    const element = document.createElement(\"style\");\n    element.appendChild(document.createTextNode(css));\n    document.body.appendChild(element);\n  }\n\n  var js_urls = [\"https://cdn.bokeh.org/bokeh/release/bokeh-3.4.3.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.4.3.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.4.3.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.4.3.min.js\", \"https://cdn.holoviz.org/panel/1.4.4/dist/panel.min.js\"];\n  var js_modules = [];\n  var js_exports = {};\n  var css_urls = [];\n  var inline_js = [    function(Bokeh) {\n      Bokeh.set_log_level(\"info\");\n    },\nfunction(Bokeh) {} // ensure no trailing comma for IE\n  ];\n\n  function run_inline_js() {\n    if ((root.Bokeh !== undefined) || (force === true)) {\n      for (var i = 0; i < inline_js.length; i++) {\n\ttry {\n          inline_js[i].call(root, root.Bokeh);\n\t} catch(e) {\n\t  if (!reloading) {\n\t    throw e;\n\t  }\n\t}\n      }\n      // Cache old bokeh versions\n      if (Bokeh != undefined && !reloading) {\n\tvar NewBokeh = root.Bokeh;\n\tif (Bokeh.versions === undefined) {\n\t  Bokeh.versions = new Map();\n\t}\n\tif (NewBokeh.version !== Bokeh.version) {\n\t  Bokeh.versions.set(NewBokeh.version, NewBokeh)\n\t}\n\troot.Bokeh = Bokeh;\n      }} else if (Date.now() < root._bokeh_timeout) {\n      setTimeout(run_inline_js, 100);\n    } else if (!root._bokeh_failed_load) {\n      console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n      root._bokeh_failed_load = true;\n    }\n    root._bokeh_is_initializing = false\n  }\n\n  function load_or_wait() {\n    // Implement a backoff loop that tries to ensure we do not load multiple\n    // versions of Bokeh and its dependencies at the same time.\n    // In recent versions we use the root._bokeh_is_initializing flag\n    // to determine whether there is an ongoing attempt to initialize\n    // bokeh, however for backward compatibility we also try to ensure\n    // that we do not start loading a newer (Panel>=1.0 and Bokeh>3) version\n    // before older versions are fully initialized.\n    if (root._bokeh_is_initializing && Date.now() > root._bokeh_timeout) {\n      root._bokeh_is_initializing = false;\n      root._bokeh_onload_callbacks = undefined;\n      console.log(\"Bokeh: BokehJS was loaded multiple times but one version failed to initialize.\");\n      load_or_wait();\n    } else if (root._bokeh_is_initializing || (typeof root._bokeh_is_initializing === \"undefined\" && root._bokeh_onload_callbacks !== undefined)) {\n      setTimeout(load_or_wait, 100);\n    } else {\n      root._bokeh_is_initializing = true\n      root._bokeh_onload_callbacks = []\n      var bokeh_loaded = Bokeh != null && (Bokeh.version === py_version || (Bokeh.versions !== undefined && Bokeh.versions.has(py_version)));\n      if (!reloading && !bokeh_loaded) {\n\troot.Bokeh = undefined;\n      }\n      load_libs(css_urls, js_urls, js_modules, js_exports, function() {\n\tconsole.debug(\"Bokeh: BokehJS plotting callback run at\", now());\n\trun_inline_js();\n      });\n    }\n  }\n  // Give older versions of the autoload script a head-start to ensure\n  // they initialize before we start loading newer version.\n  setTimeout(load_or_wait, 100)\n}(window));"},"metadata":{}},{"output_type":"display_data","data":{"application/vnd.holoviews_load.v0+json":"\nif ((window.PyViz === undefined) || (window.PyViz instanceof HTMLElement)) {\n  window.PyViz = {comms: {}, comm_status:{}, kernels:{}, receivers: {}, plot_index: []}\n}\n\n\n    function JupyterCommManager() {\n    }\n\n    JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {\n      if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {\n        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;\n        comm_manager.register_target(comm_id, function(comm) {\n          comm.on_msg(msg_handler);\n        });\n      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {\n        window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {\n          comm.onMsg = msg_handler;\n        });\n      } else if (typeof google != 'undefined' && google.colab.kernel != null) {\n        google.colab.kernel.comms.registerTarget(comm_id, (comm) => {\n          var messages = comm.messages[Symbol.asyncIterator]();\n          function processIteratorResult(result) {\n            var message = result.value;\n            console.log(message)\n            var content = {data: message.data, comm_id};\n            var buffers = []\n            for (var buffer of message.buffers || []) {\n              buffers.push(new DataView(buffer))\n            }\n            var metadata = message.metadata || {};\n            var msg = {content, buffers, metadata}\n            msg_handler(msg);\n            return messages.next().then(processIteratorResult);\n          }\n          return messages.next().then(processIteratorResult);\n        })\n      }\n    }\n\n    JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {\n      if (comm_id in window.PyViz.comms) {\n        return window.PyViz.comms[comm_id];\n      } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {\n        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;\n        var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);\n        if (msg_handler) {\n          comm.on_msg(msg_handler);\n        }\n      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {\n        var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);\n        comm.open();\n        if (msg_handler) {\n          comm.onMsg = msg_handler;\n        }\n      } else if (typeof google != 'undefined' && google.colab.kernel != null) {\n        var comm_promise = google.colab.kernel.comms.open(comm_id)\n        comm_promise.then((comm) => {\n          window.PyViz.comms[comm_id] = comm;\n          if (msg_handler) {\n            var messages = comm.messages[Symbol.asyncIterator]();\n            function processIteratorResult(result) {\n              var message = result.value;\n              var content = {data: message.data};\n              var metadata = message.metadata || {comm_id};\n              var msg = {content, metadata}\n              msg_handler(msg);\n              return messages.next().then(processIteratorResult);\n            }\n            return messages.next().then(processIteratorResult);\n          }\n        }) \n        var sendClosure = (data, metadata, buffers, disposeOnDone) => {\n          return comm_promise.then((comm) => {\n            comm.send(data, metadata, buffers, disposeOnDone);\n          });\n        };\n        var comm = {\n          send: sendClosure\n        };\n      }\n      window.PyViz.comms[comm_id] = comm;\n      return comm;\n    }\n    window.PyViz.comm_manager = new JupyterCommManager();\n    \n\n\nvar JS_MIME_TYPE = 'application/javascript';\nvar HTML_MIME_TYPE = 'text/html';\nvar EXEC_MIME_TYPE = 'application/vnd.holoviews_exec.v0+json';\nvar CLASS_NAME = 'output';\n\n/**\n * Render data to the DOM node\n */\nfunction render(props, node) {\n  var div = document.createElement(\"div\");\n  var script = document.createElement(\"script\");\n  node.appendChild(div);\n  node.appendChild(script);\n}\n\n/**\n * Handle when a new output is added\n */\nfunction handle_add_output(event, handle) {\n  var output_area = handle.output_area;\n  var output = handle.output;\n  if ((output.data == undefined) || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {\n    return\n  }\n  var id = output.metadata[EXEC_MIME_TYPE][\"id\"];\n  var toinsert = output_area.element.find(\".\" + CLASS_NAME.split(' ')[0]);\n  if (id !== undefined) {\n    var nchildren = toinsert.length;\n    var html_node = toinsert[nchildren-1].children[0];\n    html_node.innerHTML = output.data[HTML_MIME_TYPE];\n    var scripts = [];\n    var nodelist = html_node.querySelectorAll(\"script\");\n    for (var i in nodelist) {\n      if (nodelist.hasOwnProperty(i)) {\n        scripts.push(nodelist[i])\n      }\n    }\n\n    scripts.forEach( function (oldScript) {\n      var newScript = document.createElement(\"script\");\n      var attrs = [];\n      var nodemap = oldScript.attributes;\n      for (var j in nodemap) {\n        if (nodemap.hasOwnProperty(j)) {\n          attrs.push(nodemap[j])\n        }\n      }\n      attrs.forEach(function(attr) { newScript.setAttribute(attr.name, attr.value) });\n      newScript.appendChild(document.createTextNode(oldScript.innerHTML));\n      oldScript.parentNode.replaceChild(newScript, oldScript);\n    });\n    if (JS_MIME_TYPE in output.data) {\n      toinsert[nchildren-1].children[1].textContent = output.data[JS_MIME_TYPE];\n    }\n    output_area._hv_plot_id = id;\n    if ((window.Bokeh !== undefined) && (id in Bokeh.index)) {\n      window.PyViz.plot_index[id] = Bokeh.index[id];\n    } else {\n      window.PyViz.plot_index[id] = null;\n    }\n  } else if (output.metadata[EXEC_MIME_TYPE][\"server_id\"] !== undefined) {\n    var bk_div = document.createElement(\"div\");\n    bk_div.innerHTML = output.data[HTML_MIME_TYPE];\n    var script_attrs = bk_div.children[0].attributes;\n    for (var i = 0; i < script_attrs.length; i++) {\n      toinsert[toinsert.length - 1].childNodes[1].setAttribute(script_attrs[i].name, script_attrs[i].value);\n    }\n    // store reference to server id on output_area\n    output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE][\"server_id\"];\n  }\n}\n\n/**\n * Handle when an output is cleared or removed\n */\nfunction handle_clear_output(event, handle) {\n  var id = handle.cell.output_area._hv_plot_id;\n  var server_id = handle.cell.output_area._bokeh_server_id;\n  if (((id === undefined) || !(id in PyViz.plot_index)) && (server_id !== undefined)) { return; }\n  var comm = window.PyViz.comm_manager.get_client_comm(\"hv-extension-comm\", \"hv-extension-comm\", function () {});\n  if (server_id !== null) {\n    comm.send({event_type: 'server_delete', 'id': server_id});\n    return;\n  } else if (comm !== null) {\n    comm.send({event_type: 'delete', 'id': id});\n  }\n  delete PyViz.plot_index[id];\n  if ((window.Bokeh !== undefined) & (id in window.Bokeh.index)) {\n    var doc = window.Bokeh.index[id].model.document\n    doc.clear();\n    const i = window.Bokeh.documents.indexOf(doc);\n    if (i > -1) {\n      window.Bokeh.documents.splice(i, 1);\n    }\n  }\n}\n\n/**\n * Handle kernel restart event\n */\nfunction handle_kernel_cleanup(event, handle) {\n  delete PyViz.comms[\"hv-extension-comm\"];\n  window.PyViz.plot_index = {}\n}\n\n/**\n * Handle update_display_data messages\n */\nfunction handle_update_output(event, handle) {\n  handle_clear_output(event, {cell: {output_area: handle.output_area}})\n  handle_add_output(event, handle)\n}\n\nfunction register_renderer(events, OutputArea) {\n  function append_mime(data, metadata, element) {\n    // create a DOM node to render to\n    var toinsert = this.create_output_subarea(\n    metadata,\n    CLASS_NAME,\n    EXEC_MIME_TYPE\n    );\n    this.keyboard_manager.register_events(toinsert);\n    // Render to node\n    var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};\n    render(props, toinsert[0]);\n    element.append(toinsert);\n    return toinsert\n  }\n\n  events.on('output_added.OutputArea', handle_add_output);\n  events.on('output_updated.OutputArea', handle_update_output);\n  events.on('clear_output.CodeCell', handle_clear_output);\n  events.on('delete.Cell', handle_clear_output);\n  events.on('kernel_ready.Kernel', handle_kernel_cleanup);\n\n  OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {\n    safe: true,\n    index: 0\n  });\n}\n\nif (window.Jupyter !== undefined) {\n  try {\n    var events = require('base/js/events');\n    var OutputArea = require('notebook/js/outputarea').OutputArea;\n    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {\n      register_renderer(events, OutputArea);\n    }\n  } catch(err) {\n  }\n}\n","application/javascript":["\n","if ((window.PyViz === undefined) || (window.PyViz instanceof HTMLElement)) {\n","  window.PyViz = {comms: {}, comm_status:{}, kernels:{}, receivers: {}, plot_index: []}\n","}\n","\n","\n","    function JupyterCommManager() {\n","    }\n","\n","    JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {\n","      if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {\n","        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;\n","        comm_manager.register_target(comm_id, function(comm) {\n","          comm.on_msg(msg_handler);\n","        });\n","      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {\n","        window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {\n","          comm.onMsg = msg_handler;\n","        });\n","      } else if (typeof google != 'undefined' && google.colab.kernel != null) {\n","        google.colab.kernel.comms.registerTarget(comm_id, (comm) => {\n","          var messages = comm.messages[Symbol.asyncIterator]();\n","          function processIteratorResult(result) {\n","            var message = result.value;\n","            console.log(message)\n","            var content = {data: message.data, comm_id};\n","            var buffers = []\n","            for (var buffer of message.buffers || []) {\n","              buffers.push(new DataView(buffer))\n","            }\n","            var metadata = message.metadata || {};\n","            var msg = {content, buffers, metadata}\n","            msg_handler(msg);\n","            return messages.next().then(processIteratorResult);\n","          }\n","          return messages.next().then(processIteratorResult);\n","        })\n","      }\n","    }\n","\n","    JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {\n","      if (comm_id in window.PyViz.comms) {\n","        return window.PyViz.comms[comm_id];\n","      } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {\n","        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;\n","        var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);\n","        if (msg_handler) {\n","          comm.on_msg(msg_handler);\n","        }\n","      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {\n","        var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);\n","        comm.open();\n","        if (msg_handler) {\n","          comm.onMsg = msg_handler;\n","        }\n","      } else if (typeof google != 'undefined' && google.colab.kernel != null) {\n","        var comm_promise = google.colab.kernel.comms.open(comm_id)\n","        comm_promise.then((comm) => {\n","          window.PyViz.comms[comm_id] = comm;\n","          if (msg_handler) {\n","            var messages = comm.messages[Symbol.asyncIterator]();\n","            function processIteratorResult(result) {\n","              var message = result.value;\n","              var content = {data: message.data};\n","              var metadata = message.metadata || {comm_id};\n","              var msg = {content, metadata}\n","              msg_handler(msg);\n","              return messages.next().then(processIteratorResult);\n","            }\n","            return messages.next().then(processIteratorResult);\n","          }\n","        }) \n","        var sendClosure = (data, metadata, buffers, disposeOnDone) => {\n","          return comm_promise.then((comm) => {\n","            comm.send(data, metadata, buffers, disposeOnDone);\n","          });\n","        };\n","        var comm = {\n","          send: sendClosure\n","        };\n","      }\n","      window.PyViz.comms[comm_id] = comm;\n","      return comm;\n","    }\n","    window.PyViz.comm_manager = new JupyterCommManager();\n","    \n","\n","\n","var JS_MIME_TYPE = 'application/javascript';\n","var HTML_MIME_TYPE = 'text/html';\n","var EXEC_MIME_TYPE = 'application/vnd.holoviews_exec.v0+json';\n","var CLASS_NAME = 'output';\n","\n","/**\n"," * Render data to the DOM node\n"," */\n","function render(props, node) {\n","  var div = document.createElement(\"div\");\n","  var script = document.createElement(\"script\");\n","  node.appendChild(div);\n","  node.appendChild(script);\n","}\n","\n","/**\n"," * Handle when a new output is added\n"," */\n","function handle_add_output(event, handle) {\n","  var output_area = handle.output_area;\n","  var output = handle.output;\n","  if ((output.data == undefined) || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {\n","    return\n","  }\n","  var id = output.metadata[EXEC_MIME_TYPE][\"id\"];\n","  var toinsert = output_area.element.find(\".\" + CLASS_NAME.split(' ')[0]);\n","  if (id !== undefined) {\n","    var nchildren = toinsert.length;\n","    var html_node = toinsert[nchildren-1].children[0];\n","    html_node.innerHTML = output.data[HTML_MIME_TYPE];\n","    var scripts = [];\n","    var nodelist = html_node.querySelectorAll(\"script\");\n","    for (var i in nodelist) {\n","      if (nodelist.hasOwnProperty(i)) {\n","        scripts.push(nodelist[i])\n","      }\n","    }\n","\n","    scripts.forEach( function (oldScript) {\n","      var newScript = document.createElement(\"script\");\n","      var attrs = [];\n","      var nodemap = oldScript.attributes;\n","      for (var j in nodemap) {\n","        if (nodemap.hasOwnProperty(j)) {\n","          attrs.push(nodemap[j])\n","        }\n","      }\n","      attrs.forEach(function(attr) { newScript.setAttribute(attr.name, attr.value) });\n","      newScript.appendChild(document.createTextNode(oldScript.innerHTML));\n","      oldScript.parentNode.replaceChild(newScript, oldScript);\n","    });\n","    if (JS_MIME_TYPE in output.data) {\n","      toinsert[nchildren-1].children[1].textContent = output.data[JS_MIME_TYPE];\n","    }\n","    output_area._hv_plot_id = id;\n","    if ((window.Bokeh !== undefined) && (id in Bokeh.index)) {\n","      window.PyViz.plot_index[id] = Bokeh.index[id];\n","    } else {\n","      window.PyViz.plot_index[id] = null;\n","    }\n","  } else if (output.metadata[EXEC_MIME_TYPE][\"server_id\"] !== undefined) {\n","    var bk_div = document.createElement(\"div\");\n","    bk_div.innerHTML = output.data[HTML_MIME_TYPE];\n","    var script_attrs = bk_div.children[0].attributes;\n","    for (var i = 0; i < script_attrs.length; i++) {\n","      toinsert[toinsert.length - 1].childNodes[1].setAttribute(script_attrs[i].name, script_attrs[i].value);\n","    }\n","    // store reference to server id on output_area\n","    output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE][\"server_id\"];\n","  }\n","}\n","\n","/**\n"," * Handle when an output is cleared or removed\n"," */\n","function handle_clear_output(event, handle) {\n","  var id = handle.cell.output_area._hv_plot_id;\n","  var server_id = handle.cell.output_area._bokeh_server_id;\n","  if (((id === undefined) || !(id in PyViz.plot_index)) && (server_id !== undefined)) { return; }\n","  var comm = window.PyViz.comm_manager.get_client_comm(\"hv-extension-comm\", \"hv-extension-comm\", function () {});\n","  if (server_id !== null) {\n","    comm.send({event_type: 'server_delete', 'id': server_id});\n","    return;\n","  } else if (comm !== null) {\n","    comm.send({event_type: 'delete', 'id': id});\n","  }\n","  delete PyViz.plot_index[id];\n","  if ((window.Bokeh !== undefined) & (id in window.Bokeh.index)) {\n","    var doc = window.Bokeh.index[id].model.document\n","    doc.clear();\n","    const i = window.Bokeh.documents.indexOf(doc);\n","    if (i > -1) {\n","      window.Bokeh.documents.splice(i, 1);\n","    }\n","  }\n","}\n","\n","/**\n"," * Handle kernel restart event\n"," */\n","function handle_kernel_cleanup(event, handle) {\n","  delete PyViz.comms[\"hv-extension-comm\"];\n","  window.PyViz.plot_index = {}\n","}\n","\n","/**\n"," * Handle update_display_data messages\n"," */\n","function handle_update_output(event, handle) {\n","  handle_clear_output(event, {cell: {output_area: handle.output_area}})\n","  handle_add_output(event, handle)\n","}\n","\n","function register_renderer(events, OutputArea) {\n","  function append_mime(data, metadata, element) {\n","    // create a DOM node to render to\n","    var toinsert = this.create_output_subarea(\n","    metadata,\n","    CLASS_NAME,\n","    EXEC_MIME_TYPE\n","    );\n","    this.keyboard_manager.register_events(toinsert);\n","    // Render to node\n","    var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};\n","    render(props, toinsert[0]);\n","    element.append(toinsert);\n","    return toinsert\n","  }\n","\n","  events.on('output_added.OutputArea', handle_add_output);\n","  events.on('output_updated.OutputArea', handle_update_output);\n","  events.on('clear_output.CodeCell', handle_clear_output);\n","  events.on('delete.Cell', handle_clear_output);\n","  events.on('kernel_ready.Kernel', handle_kernel_cleanup);\n","\n","  OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {\n","    safe: true,\n","    index: 0\n","  });\n","}\n","\n","if (window.Jupyter !== undefined) {\n","  try {\n","    var events = require('base/js/events');\n","    var OutputArea = require('notebook/js/outputarea').OutputArea;\n","    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {\n","      register_renderer(events, OutputArea);\n","    }\n","  } catch(err) {\n","  }\n","}\n"]},"metadata":{}},{"output_type":"display_data","data":{"text/html":["<style>*[data-root-id],\n","*[data-root-id] > * {\n","  box-sizing: border-box;\n","  font-family: var(--jp-ui-font-family);\n","  font-size: var(--jp-ui-font-size1);\n","  color: var(--vscode-editor-foreground, var(--jp-ui-font-color1));\n","}\n","\n","/* Override VSCode background color */\n",".cell-output-ipywidget-background:has(\n","    > .cell-output-ipywidget-background > .lm-Widget > *[data-root-id]\n","  ),\n",".cell-output-ipywidget-background:has(> .lm-Widget > *[data-root-id]) {\n","  background-color: transparent !important;\n","}\n","</style>"]},"metadata":{}},{"output_type":"display_data","data":{},"metadata":{}},{"output_type":"execute_result","data":{"text/html":["<div id='73661b74-5f81-4329-83f2-84a60ba38bd0'>\n","  <div id=\"a359338f-9797-4454-a63e-915bd28d09c4\" data-root-id=\"73661b74-5f81-4329-83f2-84a60ba38bd0\" style=\"display: contents;\"></div>\n","</div>\n","<script type=\"application/javascript\">(function(root) {\n","  var docs_json = {\"91d5d50e-29e0-469f-8a0c-864b6b951318\":{\"version\":\"3.4.3\",\"title\":\"Bokeh Application\",\"roots\":[{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"73661b74-5f81-4329-83f2-84a60ba38bd0\",\"attributes\":{\"name\":\"Column00271\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/loading.css\"}},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/listpanel.css\"}},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/bundled/theme/default.css\"}},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/bundled/theme/native.css\"}}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"Row\",\"id\":\"ce7ba136-7659-4a53-b5c7-5c5901ce4d0c\",\"attributes\":{\"name\":\"Row00269\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"30748883-70b5-4bb9-8940-c04a8159257c\",\"attributes\":{\"css_classes\":[\"markdown\"],\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"2deea71b-d869-4380-ae18-5a9ba63f1e98\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/markdown.css\"}},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"text\":\"&lt;h1 id=&quot;chatwithyourdata_bot&quot;&gt;ChatWithYourData_Bot &lt;a class=&quot;header-anchor&quot; href=&quot;#chatwithyourdata_bot&quot;&gt;\\u00b6&lt;/a&gt;&lt;/h1&gt;\\n\"}}]}},{\"type\":\"object\",\"name\":\"panel.models.tabs.Tabs\",\"id\":\"dbf12b66-66a4-43f8-8f44-ea56c64bf9ee\",\"attributes\":{\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"tabs\":[{\"type\":\"object\",\"name\":\"TabPanel\",\"id\":\"4f177cd1-b171-4180-b829-f09c75e27d50\",\"attributes\":{\"name\":\"Column00220\",\"title\":\"Conversation\",\"child\":{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"9dee8518-74dd-4f3b-ae61-add06def7278\",\"attributes\":{\"name\":\"Column00220\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"Row\",\"id\":\"3ecc011b-e415-4b4f-b473-a0a5226a1105\",\"attributes\":{\"name\":\"Row00205\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"TextInput\",\"id\":\"e31080e7-d0c6-4d44-bab8-434c324ea5c7\",\"attributes\":{\"js_property_callbacks\":{\"type\":\"map\",\"entries\":[[\"change:value\",[{\"type\":\"object\",\"name\":\"CustomJS\",\"id\":\"08f47bb5-7967-4fa4-9c17-22bc8d7dc358\",\"attributes\":{\"tags\":[[140448716244160,[null,\"value\"],[null,\"loading\"]]],\"args\":{\"type\":\"map\",\"entries\":[[\"bidirectional\",false],[\"properties\",{\"type\":\"map\",\"entries\":[[\"value\",\"loading\"]]}],[\"source\",{\"id\":\"e31080e7-d0c6-4d44-bab8-434c324ea5c7\"}],[\"target\",{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"88099c17-6d74-43dc-84d3-ced1011d092a\",\"attributes\":{\"name\":\"Column00211\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"height\":300,\"min_height\":300,\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"3181b266-2433-4fb7-9b9a-d5927783dd91\",\"attributes\":{\"name\":\"WidgetBox00218\",\"css_classes\":[\"panel-widget-box\",\"scrollable-vertical\"],\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"c9a0cae0-71d2-45e6-98fd-cd5c84657f1d\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/widgetbox.css\"}},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"Row\",\"id\":\"a080e2f4-52fa-4fc0-8a12-2a92ba960ecf\",\"attributes\":{\"name\":\"Row00217\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"ed87f6a3-d170-4aa9-9e8d-653da4770b06\",\"attributes\":{\"css_classes\":[\"markdown\"],\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"2deea71b-d869-4380-ae18-5a9ba63f1e98\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"text\":\"&lt;p&gt;User:&lt;/p&gt;\\n\"}},{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"5e5cbcbd-4d41-46ad-aa1d-9acdcdd184d4\",\"attributes\":{\"css_classes\":[\"markdown\"],\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"2deea71b-d869-4380-ae18-5a9ba63f1e98\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"width\":600,\"min_width\":600,\"margin\":[5,10],\"align\":\"start\"}}]}}]}}]}}]]},\"code\":\"\\n    if ('value'.startsWith('event:')) {\\n      var value = true\\n    } else {\\n      var value = source['value'];\\n      value = value;\\n    }\\n    if (typeof value !== 'boolean' || source.labels !== ['Loading']) {\\n      value = true\\n    }\\n    var css_classes = target.css_classes.slice()\\n    var loading_css = ['pn-loading', 'pn-arc']\\n    if (value) {\\n      for (var css of loading_css) {\\n        if (!(css in css_classes)) {\\n          css_classes.push(css)\\n        }\\n      }\\n    } else {\\n     for (var css of loading_css) {\\n        var index = css_classes.indexOf(css)\\n        if (index > -1) {\\n          css_classes.splice(index, 1)\\n        }\\n      }\\n    }\\n    target['css_classes'] = css_classes\\n    \"}}]]]},\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"width\":300,\"min_width\":300,\"margin\":[5,10],\"align\":\"start\",\"placeholder\":\"Enter text here\\u2026\",\"max_length\":5000}}]}},{\"type\":\"object\",\"name\":\"Div\",\"id\":\"762198bc-b8b0-41c7-9cb4-54850e34b1d7\",\"attributes\":{\"name\":\"Divider00206\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"7425b33a-a63d-4003-b90d-bd082a50ce4f\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/loading.css\"}},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"3864944f-ddb6-42c9-bcf9-f0e4a14fc5e3\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/divider.css\"}}],\"margin\":0,\"width_policy\":\"fit\",\"align\":\"start\",\"text\":\"<hr>\"}},{\"id\":\"88099c17-6d74-43dc-84d3-ced1011d092a\"},{\"type\":\"object\",\"name\":\"Div\",\"id\":\"6cf8aecf-43b4-489d-9948-eb2c4b9f0df3\",\"attributes\":{\"name\":\"Divider00219\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"3aa42cbc-d1d5-4c31-8dc3-5c5bf81c6633\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/loading.css\"}},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"e3412c40-9192-4baf-aee1-d69209e79c4d\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/divider.css\"}}],\"margin\":0,\"width_policy\":\"fit\",\"align\":\"start\",\"text\":\"<hr>\"}}]}}}},{\"type\":\"object\",\"name\":\"TabPanel\",\"id\":\"e83ab056-2e19-4a55-a5dd-f860f73d1efc\",\"attributes\":{\"name\":\"Column00239\",\"title\":\"Database\",\"child\":{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"02b45bf7-6b01-489c-848f-51cd8ac0f529\",\"attributes\":{\"name\":\"Column00239\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"e6281715-664a-42b9-9f26-cc3bfd2a2d1a\",\"attributes\":{\"name\":\"Column00225\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"f9f21cab-9a10-4301-9e13-dfca627d15cf\",\"attributes\":{\"name\":\"Column00232\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"Row\",\"id\":\"76235054-c303-4430-b7df-729249db4080\",\"attributes\":{\"name\":\"Row00228\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"bfcf2dca-6fb6-434f-80ba-4cf34aba2b71\",\"attributes\":{\"css_classes\":[\"markdown\"],\"styles\":{\"type\":\"map\",\"entries\":[[\"background-color\",\"#F6F6F6\"]]},\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"2deea71b-d869-4380-ae18-5a9ba63f1e98\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"text\":\"&lt;p&gt;Last question to DB:&lt;/p&gt;\\n\"}}]}},{\"type\":\"object\",\"name\":\"Row\",\"id\":\"81a73e66-5d07-4a10-b1ee-fbc52a58a0bd\",\"attributes\":{\"name\":\"Row00231\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"36a6c3f1-6a6f-40ef-ae51-218f3e9679ed\",\"attributes\":{\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"text\":\"&lt;pre&gt;no DB accesses so far&lt;/pre&gt;\"}}]}}]}}]}},{\"type\":\"object\",\"name\":\"Div\",\"id\":\"cd1ceb47-8c47-4ddf-b19c-2c954e3fe8e2\",\"attributes\":{\"name\":\"Divider00233\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"ea6e3d6f-a2cf-49ef-8032-3bad999b5cb7\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/loading.css\"}},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"9d7a17c1-8715-4d8c-bc33-a163e2d96921\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/divider.css\"}}],\"margin\":0,\"width_policy\":\"fit\",\"align\":\"start\",\"text\":\"<hr>\"}},{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"71d80c7b-15f3-4075-964a-973dd896beac\",\"attributes\":{\"name\":\"Column00238\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"0d6882da-8e67-46e9-ba29-456c25501879\",\"attributes\":{\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"text\":\"&lt;pre&gt; &lt;/pre&gt;\"}}]}}]}}}},{\"type\":\"object\",\"name\":\"TabPanel\",\"id\":\"0e53290f-e958-408d-8493-2efe2125c335\",\"attributes\":{\"name\":\"Column00250\",\"title\":\"Chat History\",\"child\":{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"e0b7210c-1d42-4e8e-8fb1-7bba35f3ef0b\",\"attributes\":{\"name\":\"Column00250\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"503b235d-888b-4bf2-9a61-ad7a70314600\",\"attributes\":{\"name\":\"Column00244\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"d07f7856-50a2-40d2-8bf7-d768b237bafe\",\"attributes\":{\"name\":\"WidgetBox00248\",\"css_classes\":[\"panel-widget-box\",\"scrollable-vertical\"],\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"c9a0cae0-71d2-45e6-98fd-cd5c84657f1d\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"width\":600,\"min_width\":600,\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"Row\",\"id\":\"ddf2c721-94ff-4e2e-a515-47911aa19e16\",\"attributes\":{\"name\":\"Row00247\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"280fb336-a27d-4b25-8b31-f734426cadd9\",\"attributes\":{\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"text\":\"&lt;pre&gt;No History Yet&lt;/pre&gt;\"}}]}}]}}]}},{\"type\":\"object\",\"name\":\"Div\",\"id\":\"50483984-01f3-48b4-8d56-37e49d9ac924\",\"attributes\":{\"name\":\"Divider00249\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"d27bef5b-f769-4f5b-b62f-50205f8d0854\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/loading.css\"}},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"b18a1503-3855-4b4e-9b00-6cb257666131\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/divider.css\"}}],\"margin\":0,\"width_policy\":\"fit\",\"align\":\"start\",\"text\":\"<hr>\"}}]}}}},{\"type\":\"object\",\"name\":\"TabPanel\",\"id\":\"2945c2d1-9aae-49e6-9979-0d78faa74f39\",\"attributes\":{\"name\":\"Column00266\",\"title\":\"Configure\",\"child\":{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"9f794882-46ac-4348-b67f-9d731a33acfc\",\"attributes\":{\"name\":\"Column00266\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"Row\",\"id\":\"d65d6d8b-ec01-41c7-8fa1-e4128d4dbb1d\",\"attributes\":{\"name\":\"Row00258\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"FileInput\",\"id\":\"45d41dbc-a755-4ebc-9c07-3cd12bcfc842\",\"attributes\":{\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"accept\":\".pdf\"}},{\"type\":\"object\",\"name\":\"panel.models.widgets.Button\",\"id\":\"76a85c17-d104-48ec-9311-cfcd309685b6\",\"attributes\":{\"button_type\":\"primary\",\"subscribed_events\":{\"type\":\"set\",\"entries\":[\"button_click\"]},\"css_classes\":[\"solid\"],\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"fc16bc06-503f-465b-adce-4cb2d42ec06f\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/button.css\"}},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"label\":\"Load DB\"}},{\"type\":\"object\",\"name\":\"panel.models.layout.Column\",\"id\":\"a54bed5f-9e18-44c9-8251-279bf817e0a1\",\"attributes\":{\"name\":\"Column00255\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"8bb94ffd-7778-406c-98cb-176bcd8a1042\",\"attributes\":{\"css_classes\":[\"markdown\"],\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"2deea71b-d869-4380-ae18-5a9ba63f1e98\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"text\":\"&lt;p&gt;Loaded File: &lt;a href=&quot;https://ai.stanford.edu/~nilsson/MLBOOK.pdf&quot;&gt;https://ai.stanford.edu/~nilsson/MLBOOK.pdf&lt;/a&gt;&lt;/p&gt;\\n\"}}]}}]}},{\"type\":\"object\",\"name\":\"Row\",\"id\":\"25e89737-b7ac-4143-8a92-a06d6f6277f8\",\"attributes\":{\"name\":\"Row00261\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.widgets.Button\",\"id\":\"0338ba9b-33cf-4818-8a72-f47681b5bf8f\",\"attributes\":{\"button_type\":\"warning\",\"subscribed_events\":{\"type\":\"set\",\"entries\":[\"button_click\"]},\"css_classes\":[\"solid\"],\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"fc16bc06-503f-465b-adce-4cb2d42ec06f\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"label\":\"Clear History\"}},{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"324dc3e5-1e42-4ff9-9dfc-3cd2debf2861\",\"attributes\":{\"css_classes\":[\"markdown\"],\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"2deea71b-d869-4380-ae18-5a9ba63f1e98\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":[5,10],\"align\":\"start\",\"text\":\"&lt;p&gt;Clears chat history. Can use to start a new topic&lt;/p&gt;\\n\"}}]}},{\"type\":\"object\",\"name\":\"Div\",\"id\":\"f6899c8c-2f5e-4791-9dff-c8a77ed5a4d2\",\"attributes\":{\"name\":\"Divider00262\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"dc0f2978-c677-4e4d-91c4-9b15662278c9\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/loading.css\"}},{\"type\":\"object\",\"name\":\"ImportedStyleSheet\",\"id\":\"e93fcfc4-4d79-4ebe-9a06-7cae007223fc\",\"attributes\":{\"url\":\"https://cdn.holoviz.org/panel/1.4.4/dist/css/divider.css\"}}],\"margin\":0,\"width_policy\":\"fit\",\"align\":\"start\",\"text\":\"<hr>\"}},{\"type\":\"object\",\"name\":\"Row\",\"id\":\"a3585773-4510-47d6-9a14-324cde83d772\",\"attributes\":{\"name\":\"Row00265\",\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"8ef8e46f-31d2-41aa-9759-721ada2eebc7\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"margin\":0,\"align\":\"start\",\"children\":[{\"type\":\"object\",\"name\":\"panel.models.markup.HTML\",\"id\":\"9ceb71dd-9a6e-4b9b-a203-d64e4d353853\",\"attributes\":{\"stylesheets\":[\"\\n:host(.pn-loading):before, .pn-loading:before {\\n  background-color: #c3c3c3;\\n  mask-size: auto calc(min(50%, 400px));\\n  -webkit-mask-size: auto calc(min(50%, 400px));\\n}\",{\"id\":\"2339a507-a27f-432a-97b6-5dcf9be366b4\"},{\"id\":\"420230a8-edc7-49f5-8ede-eaf5e4bbfd60\"},{\"id\":\"95b86fe9-f608-4b79-9bd0-689de7d96ef9\"}],\"width\":400,\"min_width\":400,\"margin\":[5,10],\"align\":\"start\",\"text\":\"&lt;img src=&quot;./img/convchain.jpg&quot;  style=&quot;max-width: 100%; max-height: 100%; object-fit: contain; width: 400px; height: auto;&quot;&gt;&lt;/img&gt;\"}}]}}]}}}}]}}]}},{\"type\":\"object\",\"name\":\"panel.models.comm_manager.CommManager\",\"id\":\"950c46a1-4e16-4580-8b15-3ad3261cec6c\",\"attributes\":{\"plot_id\":\"73661b74-5f81-4329-83f2-84a60ba38bd0\",\"comm_id\":\"ca55797a32884bf8b97ba5087ab755ba\",\"client_comm_id\":\"ba9f2e56488e451ca8d827bc5ca1ade9\"}}],\"defs\":[{\"type\":\"model\",\"name\":\"ReactiveHTML1\"},{\"type\":\"model\",\"name\":\"FlexBox1\",\"properties\":[{\"name\":\"align_content\",\"kind\":\"Any\",\"default\":\"flex-start\"},{\"name\":\"align_items\",\"kind\":\"Any\",\"default\":\"flex-start\"},{\"name\":\"flex_direction\",\"kind\":\"Any\",\"default\":\"row\"},{\"name\":\"flex_wrap\",\"kind\":\"Any\",\"default\":\"wrap\"},{\"name\":\"gap\",\"kind\":\"Any\",\"default\":\"\"},{\"name\":\"justify_content\",\"kind\":\"Any\",\"default\":\"flex-start\"}]},{\"type\":\"model\",\"name\":\"FloatPanel1\",\"properties\":[{\"name\":\"config\",\"kind\":\"Any\",\"default\":{\"type\":\"map\"}},{\"name\":\"contained\",\"kind\":\"Any\",\"default\":true},{\"name\":\"position\",\"kind\":\"Any\",\"default\":\"right-top\"},{\"name\":\"offsetx\",\"kind\":\"Any\",\"default\":null},{\"name\":\"offsety\",\"kind\":\"Any\",\"default\":null},{\"name\":\"theme\",\"kind\":\"Any\",\"default\":\"primary\"},{\"name\":\"status\",\"kind\":\"Any\",\"default\":\"normalized\"}]},{\"type\":\"model\",\"name\":\"GridStack1\",\"properties\":[{\"name\":\"mode\",\"kind\":\"Any\",\"default\":\"warn\"},{\"name\":\"ncols\",\"kind\":\"Any\",\"default\":null},{\"name\":\"nrows\",\"kind\":\"Any\",\"default\":null},{\"name\":\"allow_resize\",\"kind\":\"Any\",\"default\":true},{\"name\":\"allow_drag\",\"kind\":\"Any\",\"default\":true},{\"name\":\"state\",\"kind\":\"Any\",\"default\":[]}]},{\"type\":\"model\",\"name\":\"drag1\",\"properties\":[{\"name\":\"slider_width\",\"kind\":\"Any\",\"default\":5},{\"name\":\"slider_color\",\"kind\":\"Any\",\"default\":\"black\"},{\"name\":\"value\",\"kind\":\"Any\",\"default\":50}]},{\"type\":\"model\",\"name\":\"click1\",\"properties\":[{\"name\":\"terminal_output\",\"kind\":\"Any\",\"default\":\"\"},{\"name\":\"debug_name\",\"kind\":\"Any\",\"default\":\"\"},{\"name\":\"clears\",\"kind\":\"Any\",\"default\":0}]},{\"type\":\"model\",\"name\":\"FastWrapper1\",\"properties\":[{\"name\":\"object\",\"kind\":\"Any\",\"default\":null},{\"name\":\"style\",\"kind\":\"Any\",\"default\":null}]},{\"type\":\"model\",\"name\":\"NotificationAreaBase1\",\"properties\":[{\"name\":\"js_events\",\"kind\":\"Any\",\"default\":{\"type\":\"map\"}},{\"name\":\"position\",\"kind\":\"Any\",\"default\":\"bottom-right\"},{\"name\":\"_clear\",\"kind\":\"Any\",\"default\":0}]},{\"type\":\"model\",\"name\":\"NotificationArea1\",\"properties\":[{\"name\":\"js_events\",\"kind\":\"Any\",\"default\":{\"type\":\"map\"}},{\"name\":\"notifications\",\"kind\":\"Any\",\"default\":[]},{\"name\":\"position\",\"kind\":\"Any\",\"default\":\"bottom-right\"},{\"name\":\"_clear\",\"kind\":\"Any\",\"default\":0},{\"name\":\"types\",\"kind\":\"Any\",\"default\":[{\"type\":\"map\",\"entries\":[[\"type\",\"warning\"],[\"background\",\"#ffc107\"],[\"icon\",{\"type\":\"map\",\"entries\":[[\"className\",\"fas fa-exclamation-triangle\"],[\"tagName\",\"i\"],[\"color\",\"white\"]]}]]},{\"type\":\"map\",\"entries\":[[\"type\",\"info\"],[\"background\",\"#007bff\"],[\"icon\",{\"type\":\"map\",\"entries\":[[\"className\",\"fas fa-info-circle\"],[\"tagName\",\"i\"],[\"color\",\"white\"]]}]]}]}]},{\"type\":\"model\",\"name\":\"Notification\",\"properties\":[{\"name\":\"background\",\"kind\":\"Any\",\"default\":null},{\"name\":\"duration\",\"kind\":\"Any\",\"default\":3000},{\"name\":\"icon\",\"kind\":\"Any\",\"default\":null},{\"name\":\"message\",\"kind\":\"Any\",\"default\":\"\"},{\"name\":\"notification_type\",\"kind\":\"Any\",\"default\":null},{\"name\":\"_destroyed\",\"kind\":\"Any\",\"default\":false}]},{\"type\":\"model\",\"name\":\"TemplateActions1\",\"properties\":[{\"name\":\"open_modal\",\"kind\":\"Any\",\"default\":0},{\"name\":\"close_modal\",\"kind\":\"Any\",\"default\":0}]},{\"type\":\"model\",\"name\":\"BootstrapTemplateActions1\",\"properties\":[{\"name\":\"open_modal\",\"kind\":\"Any\",\"default\":0},{\"name\":\"close_modal\",\"kind\":\"Any\",\"default\":0}]},{\"type\":\"model\",\"name\":\"TemplateEditor1\",\"properties\":[{\"name\":\"layout\",\"kind\":\"Any\",\"default\":[]}]},{\"type\":\"model\",\"name\":\"MaterialTemplateActions1\",\"properties\":[{\"name\":\"open_modal\",\"kind\":\"Any\",\"default\":0},{\"name\":\"close_modal\",\"kind\":\"Any\",\"default\":0}]},{\"type\":\"model\",\"name\":\"copy_to_clipboard1\",\"properties\":[{\"name\":\"fill\",\"kind\":\"Any\",\"default\":\"none\"},{\"name\":\"value\",\"kind\":\"Any\",\"default\":null}]}]}};\n","  var render_items = [{\"docid\":\"91d5d50e-29e0-469f-8a0c-864b6b951318\",\"roots\":{\"73661b74-5f81-4329-83f2-84a60ba38bd0\":\"a359338f-9797-4454-a63e-915bd28d09c4\"},\"root_ids\":[\"73661b74-5f81-4329-83f2-84a60ba38bd0\"]}];\n","  var docs = Object.values(docs_json)\n","  if (!docs) {\n","    return\n","  }\n","  const py_version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')\n","  async function embed_document(root) {\n","    var Bokeh = get_bokeh(root)\n","    await Bokeh.embed.embed_items_notebook(docs_json, render_items);\n","    for (const render_item of render_items) {\n","      for (const root_id of render_item.root_ids) {\n","\tconst id_el = document.getElementById(root_id)\n","\tif (id_el.children.length && id_el.children[0].hasAttribute('data-root-id')) {\n","\t  const root_el = id_el.children[0]\n","\t  root_el.id = root_el.id + '-rendered'\n","\t  for (const child of root_el.children) {\n","            // Ensure JupyterLab does not capture keyboard shortcuts\n","            // see: https://jupyterlab.readthedocs.io/en/4.1.x/extension/notebook.html#keyboard-interaction-model\n","\t    child.setAttribute('data-lm-suppress-shortcuts', 'true')\n","\t  }\n","\t}\n","      }\n","    }\n","  }\n","  function get_bokeh(root) {\n","    if (root.Bokeh === undefined) {\n","      return null\n","    } else if (root.Bokeh.version !== py_version) {\n","      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(py_version)) {\n","\treturn null\n","      }\n","      return root.Bokeh.versions.get(py_version);\n","    } else if (root.Bokeh.version === py_version) {\n","      return root.Bokeh\n","    }\n","    return null\n","  }\n","  function is_loaded(root) {\n","    var Bokeh = get_bokeh(root)\n","    return (Bokeh != null && Bokeh.Panel !== undefined)\n","  }\n","  if (is_loaded(root)) {\n","    embed_document(root);\n","  } else {\n","    var attempts = 0;\n","    var timer = setInterval(function(root) {\n","      if (is_loaded(root)) {\n","        clearInterval(timer);\n","        embed_document(root);\n","      } else if (document.readyState == \"complete\") {\n","        attempts++;\n","        if (attempts > 200) {\n","          clearInterval(timer);\n","\t  var Bokeh = get_bokeh(root)\n","\t  if (Bokeh == null || Bokeh.Panel == null) {\n","            console.warn(\"Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing\");\n","\t  } else {\n","\t    console.warn(\"Panel: WARNING: Attempting to render but not all required libraries could be resolved.\")\n","\t    embed_document(root)\n","\t  }\n","        }\n","      }\n","    }, 25, root)\n","  }\n","})(window);</script>"],"application/vnd.holoviews_exec.v0+json":"","text/plain":["Column\n","    [0] Row\n","        [0] Markdown(str)\n","    [1] Tabs\n","        [0] Column\n","            [0] Row\n","                [0] TextInput(placeholder='Enter text here…')\n","            [1] Divider()\n","            [2] ParamFunction(function, _pane=WidgetBox, defer_load=False, height=300, loading_indicator=True)\n","            [3] Divider()\n","        [1] Column\n","            [0] ParamMethod(method, _pane=Column, defer_load=False)\n","            [1] Divider()\n","            [2] ParamMethod(method, _pane=Str, defer_load=False)\n","        [2] Column\n","            [0] ParamMethod(method, _pane=WidgetBox, defer_load=False)\n","            [1] Divider()\n","        [3] Column\n","            [0] Row\n","                [0] FileInput(accept='.pdf')\n","                [1] Button(button_type='primary', name='Load DB')\n","                [2] ParamFunction(function, _pane=Markdown, defer_load=False)\n","            [1] Row\n","                [0] Button(button_type='warning', name='Clear History')\n","                [1] Markdown(str)\n","            [2] Divider()\n","            [3] Row\n","                [0] Image(str, width=400)"]},"metadata":{"application/vnd.holoviews_exec.v0+json":{"id":"73661b74-5f81-4329-83f2-84a60ba38bd0"}},"execution_count":118}]},{"cell_type":"code","source":[],"metadata":{"id":"UQLY5TuSXKG-"},"execution_count":null,"outputs":[]}],"metadata":{"colab":{"provenance":[{"file_id":"1QGMxdI4sU1QbgL2LYbu24Qj9BPcz6kb0","timestamp":1722782790204}],"collapsed_sections":["WC9InTkjiczp","HBNWZ9ql2IJD","j4QpRyeOvv2Y","ho9Bw_M6ytGg","9ZepBuiK17L-"],"authorship_tag":"ABX9TyPVuwXX0Kc6SHrEYCuSSwJV"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}